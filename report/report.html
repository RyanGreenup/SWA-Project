<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-04-28 Tue 20:23 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Ryan Greenup" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.cacheClassElem = elem.className;
         elem.cacheClassTarget = target.className;
         target.className = "code-highlighted";
         elem.className   = "code-highlighted";
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(elem.cacheClassElem)
         elem.className = elem.cacheClassElem;
       if(elem.cacheClassTarget)
         target.className = elem.cacheClassTarget;
     }
    /*]]>*///-->
// @license-end
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org81e70fc">1. 8.1 Analysing the Relationship Between Friends and Followers for Twitter Users</a>
<ul>
<li><a href="#org51876fd">1.1. 8.1.1 Retrieve the posts from Twitter</a></li>
<li><a href="#org81c02cc">1.2. 8.2.2 Count of Followers and Friends</a></li>
<li><a href="#org0c1aff8">1.3. 8.1.3 Summary Statistics</a></li>
<li><a href="#org3e7829c">1.4. 8.1.4 Above Average Followers</a></li>
<li><a href="#orge7cff74">1.5. 8.1.5 Bootstrap confidence intervals</a>
<ul>
<li><a href="#org515705c">1.5.1. a/b.) Generate a bootsrap distribution</a></li>
<li><a href="#org9353c3c">1.5.2. c.) Estimate a Confidence Interval for the population mean Follower Counts</a></li>
<li><a href="#org7a147aa">1.5.3. d.) Estimate a Confidence Interval for the population mean Friend Counts</a></li>
</ul>
</li>
<li><a href="#org6486b81">1.6. <span class="todo FIXME">FIXME</span> 8.1.6 Estimate a 97% Confidence Interval for the High Friend Count Proportion</a></li>
<li><a href="#org80bf579">1.7. 8.1.7 Is the Number of Friends Independent to the Number of Followers</a>
<ul>
<li><a href="#org42dce26">1.7.1. Bin the Follower and Friend Categories</a></li>
<li><a href="#orgbacd291">1.7.2. Find the Group frequency</a></li>
<li><a href="#org0bca06c">1.7.3. Find the Expected Counts under each group and test for independence</a></li>
<li><a href="#orgd76a51e">1.7.4. <span class="todo FIXME">FIXME</span> Conclusion</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org81e70fc" class="outline-2">
<h2 id="org81e70fc"><span class="section-number-2">1</span> 8.1 Analysing the Relationship Between Friends and Followers for Twitter Users</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org51876fd" class="outline-3">
<h3 id="org51876fd"><span class="section-number-3">1.1</span> 8.1.1 Retrieve the posts from Twitter</h3>
<div class="outline-text-3" id="text-1-1">
<p>
relevant posts can be retrieved from twitter by utilising the <code>rtweet</code> package, packages can be loaded for use in <b><b><span class="underline">R</span></b></b> thusly:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Load the Packages for <b><b><i>R</i></b></b></label><pre class="src src-R" id="org205a288"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">Load Packages -----------------------------------------------------------</span>
<span style="color: #a9a1e1;">setwd</span>(<span style="color: #98be65;">"~/Dropbox/Notes/DataSci/Social_Web_Analytics/SWA-Project/scripts/"</span>)

<span style="color: #51afef;">if</span> (<span style="color: #a9a1e1;">require</span>(<span style="color: #98be65;">"pacman"</span>)) {
  <span style="color: #a9a1e1;">library</span>(pacman)
} <span style="color: #51afef;">else</span>{
  install.packages(<span style="color: #98be65;">"pacman"</span>)
  <span style="color: #a9a1e1;">library</span>(pacman)
}

pacman::p_load(xts, sp, gstat, ggplot2, rmarkdown, reshape2,
               ggmap, parallel, dplyr, plotly, tidyverse,
               reticulate, UsingR, Rmpfr, swirl, corrplot,
               gridExtra, mise, latex2exp, tree, rpart,
               lattice, coin, primes, epitools, maps, clipr,
               ggmap, twitteR, ROAuth, tm, rtweet, base64enc,
               httpuv, SnowballC, RColorBrewer, wordcloud,
               ggwordcloud, tidyverse, boot)
</pre>
</div>


<p>
The <code>rtweet</code> API will search for tweets that contain all the words of a query
regardless of uppercase or lowercase usage <sup><a href="#citeproc_bib_item_1">1</a></sup>.
</p>

<p>
In order to leverage the <i>Twitter</i> API it is necessary to use tokens provided through a <i>Twitter</i> developer account:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Import the twitter tokens (redacted)</label><pre class="src src-R" id="org6b89180"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">Set up Tokens ===========================================================</span>

<span style="color: #a9a1e1;">options</span>(RCurlOptions = list(
  verbose = <span style="color: #ECBE7B;">FALSE</span>,
  capath = system.file(<span style="color: #98be65;">"CurlSSL"</span>, <span style="color: #98be65;">"cacert.pem"</span>, package = <span style="color: #98be65;">"RCurl"</span>),
  ssl.verifypeer = <span style="color: #ECBE7B;">FALSE</span>
))

setup_twitter_oauth(
  consumer_key = <span style="color: #98be65;">"*************************"</span>,
  consumer_secret = <span style="color: #98be65;">"**************************************************"</span>,
  access_token = <span style="color: #98be65;">"**************************************************"</span>,
  access_secret = <span style="color: #98be65;">"*********************************************"</span>
)

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">rtweet ==================================================================</span>
tk <span style="color: #a9a1e1;">&lt;-</span>    rtweet::create_token(
  app = <span style="color: #98be65;">"SWA"</span>,
  consumer_key    = <span style="color: #98be65;">"*************************"</span>,
  consumer_secret = <span style="color: #98be65;">"**************************************************"</span>,
  access_token    = <span style="color: #98be65;">"**************************************************"</span>,
  access_secret   = <span style="color: #98be65;">"*********************************************"</span>,
  set_renv        = <span style="color: #ECBE7B;">FALSE</span>
</pre>
</div>

<p>
and hence all tweets containing a mention of <i>Ubisoft</i> can be returned and saved to disk as shown in listing <a href="#orgf2ac4bc">3</a>:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Save the Tweets to the HDD as an <code>rdata</code> file</label><pre class="src src-R" id="orgf2ac4bc"> n <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #da8548; font-weight: bold;">1000</span>
 tweets.company <span style="color: #a9a1e1;">&lt;-</span> search_tweets(q = <span style="color: #98be65;">'ubisoft'</span>, n = n, token = tk,
                                 include_rts = <span style="color: #ECBE7B;">FALSE</span>)
 save(tweets.company[,], file = <span style="color: #98be65;">"resources/Download_1.Rdata"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org81c02cc" class="outline-3">
<h3 id="org81c02cc"><span class="section-number-3">1.2</span> 8.2.2 Count of Followers and Friends</h3>
<div class="outline-text-3" id="text-1-2">
<p>
In order to identify the number of users that are contained in the <i>tweets</i> the
<code>unique()</code> function can be used to return a vector of names which can then be passed as an index to the vector of counts as shown in listing <a href="#orgf9323cf">4</a>, this provides that 81.7% of the tweets are by unique users.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>Return follower count of twitter posts</label><pre class="src src-R" id="orgf9323cf">(users <span style="color: #a9a1e1;">&lt;-</span> unique(tweets.company$name)) <span style="color: #a9a1e1;">%&gt;%</span> length()
x <span style="color: #a9a1e1;">&lt;-</span> tweets.company$followers_count[duplicated(tweets.company$name)]
y <span style="color: #a9a1e1;">&lt;-</span> tweets.company$friends_count[duplicated(tweets.company$name)]

<span style="color: #5B6268;">## </span><span style="color: #5B6268;">&gt; [1] 817</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org0c1aff8" class="outline-3">
<h3 id="org0c1aff8"><span class="section-number-3">1.3</span> 8.1.3 Summary Statistics</h3>
<div class="outline-text-3" id="text-1-3">
<p>
The average number of friends and followers from users who posted tweets mentioning <i>Ubisoft</i> can be returned using the <code>mean()</code> as shown in listing <a href="#orgcbc2fa0">5</a>
this provides that on average each user has 586 friends and 63,620 followers.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>Determine the average number of friends and followers</label><pre class="src src-R" id="orgcbc2fa0">x<span style="color: #a9a1e1;">&lt;-</span> rnorm(<span style="color: #da8548; font-weight: bold;">090</span>)
y<span style="color: #a9a1e1;">&lt;-</span> rnorm(<span style="color: #da8548; font-weight: bold;">090</span>)
(xbar <span style="color: #a9a1e1;">&lt;-</span> mean(x))
(ybar <span style="color: #a9a1e1;">&lt;-</span> mean(y))

<span style="color: #5B6268;">## </span><span style="color: #5B6268;">&gt; [1] 4295.195</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">&gt; [1] 435.9449</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3e7829c" class="outline-3">
<h3 id="org3e7829c"><span class="section-number-3">1.4</span> 8.1.4 Above Average Followers</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Each user can be compared to the average number of followers, by using a logical
operator on the vector (e.g. <code>y &gt; ybar</code>), this will return an output of logical
values. <b><i>R</i></b> will coerce logicals into 1/0 values meaning that the mean value
will return the proportion of <code>TRUE</code> responses as shown in listing <a href="#orgd67c550">6</a>. This
provides that:
</p>

<ul class="org-ul">
<li>2.4%  of the have identified have an above average <b>number of followers</b>.</li>
<li>20.6% of the users identified have an above average <b>number of friends</b>.</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>Calculate the proportion of users with above average follower counts</label><pre class="src src-R" id="orgd67c550">(px_hat <span style="color: #a9a1e1;">&lt;-</span> mean(x&gt;xbar))
(py_hat <span style="color: #a9a1e1;">&lt;-</span> mean(y&gt;ybar))

<span style="color: #5B6268;">## </span><span style="color: #5B6268;">&gt; [1] 0.0244798</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">&gt; [1] 0.2729498</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orge7cff74" class="outline-3">
<h3 id="orge7cff74"><span class="section-number-3">1.5</span> 8.1.5 Bootstrap confidence intervals</h3>
<div class="outline-text-3" id="text-1-5">
</div>
<div id="outline-container-org515705c" class="outline-4">
<h4 id="org515705c"><span class="section-number-4">1.5.1</span> a/b.) Generate a bootsrap distribution</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
A bootstrap assumes that the population is an infinitely large repetition of the
sample and may be produces with respect to follower counts by resampling with
replacement/repetition and plotted using the <code>ggplot2</code> library as deomonstrated
in listings <a href="#org866de59">7</a> and <a href="#org3ee0645">8</a> and shown in figure <a href="#orgc1d183e">1</a>.
</p>

<p>
This shows that the population follower counts is a non-normal skew-right
distribution, which is expected because the number of friends is an integer value bound by zero <sup><a href="#citeproc_bib_item_2">2</a></sup>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>Bootstrapping a population from the sample.</label><pre class="src src-R" id="org866de59"><span style="color: #5B6268;">## </span><span style="color: #5B6268;">Resample the Data</span>
(bt_pop <span style="color: #a9a1e1;">&lt;-</span> sample(x, size = <span style="color: #da8548; font-weight: bold;">10</span>^<span style="color: #da8548; font-weight: bold;">6</span>, replace = <span style="color: #ECBE7B;">TRUE</span>)) <span style="color: #a9a1e1;">%&gt;%</span> head()

<span style="color: #5B6268;">## </span><span style="color: #5B6268;">&gt; [1]   7 515 262 309 186 166</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-r" id="org3ee0645"><span style="color: #5B6268;">## </span><span style="color: #5B6268;">Make the Population</span>
bt_pop_data <span style="color: #a9a1e1;">&lt;-</span> tibble(<span style="color: #98be65;">"Followers"</span> = bt_pop)
ggplot(data = bt_pop_data, aes(x = Followers)) +
  geom_histogram(aes(y = ..density..), fill = <span style="color: #98be65;">"lightblue"</span>, bins = <span style="color: #da8548; font-weight: bold;">35</span>, col = <span style="color: #98be65;">"pink"</span>) +
  geom_density(col = <span style="color: #98be65;">"violetred2"</span>) +
  scale_x_continuous(limits = c(<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">800</span>)) +
  theme_bw() +
  labs(x = <span style="color: #98be65;">"Number of Followers"</span>, y = <span style="color: #98be65;">"Density"</span>,
       title = <span style="color: #98be65;">"Bootstrapped population of Follower Numbers"</span>)

</pre>
</div>


<div id="orgc1d183e" class="figure">
<p><img src="./Figures/BootStrap_Pop.png" alt="BootStrap_Pop.png" width="400px" />
</p>
<p><span class="figure-number">Figure 1: </span>Histogram of the bootrapped population of follower counts</p>
</div>
</div>
</div>

<div id="outline-container-org9353c3c" class="outline-4">
<h4 id="org9353c3c"><span class="section-number-4">1.5.2</span> c.) Estimate a Confidence Interval for the population mean Follower Counts</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
In order to perform a bootrap for the population mean value of follower counts it is necessary to:
</p>

<ol class="org-ol">
<li>Resample the data with replacement
<ul class="org-ul">
<li>i.e. randomly select values from the sample allowing for repetition</li>
</ul></li>
<li>Measure the statistic of concern</li>
<li>Replicate this a sufficient number of times
<ul class="org-ul">
<li>i.e. Greater than or equal to 1000 times <sup>Ch. <a href="#citeproc_bib_item_3">3</a></sup></li>
</ul></li>
</ol>

<p>
This is equivalent to drawing a sample from a population that is infinitely large and constructed of repetitions of the sample. This can be performed in <b><i>R</i></b> as shown in listing <a href="#orgbfb2a92">9</a>.
</p>


<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>Confidence Interval of Mean Follower Count in Population</label><pre class="src src-R" id="orgbfb2a92">xbar_boot_loop <span style="color: #a9a1e1;">&lt;-</span> replicate(<span style="color: #da8548; font-weight: bold;">10</span>^<span style="color: #da8548; font-weight: bold;">3</span>, {
  s <span style="color: #a9a1e1;">&lt;-</span> sample(x, replace = <span style="color: #ECBE7B;">TRUE</span>)
  mean(s)
  })
quantile(xbar_boot_loop, c((<span style="color: #da8548; font-weight: bold;">1</span>-<span style="color: #da8548; font-weight: bold;">0.97</span>)/<span style="color: #da8548; font-weight: bold;">2</span>, (<span style="color: #da8548; font-weight: bold;">1</span>+<span style="color: #da8548; font-weight: bold;">0.97</span>)/<span style="color: #da8548; font-weight: bold;">2</span>))

<span style="color: #5B6268;">##       </span><span style="color: #5B6268;">1.5%      98.5%</span>
<span style="color: #5B6268;">##   </span><span style="color: #5B6268;">588.4189 10228.7352</span>
</pre>
</div>

<p>
A 97% probability interval is such that a sample drawn from a population will contain the population mean in that interval 97% of the time, this means that it may be concluded with a high degree of certainty that the true population mean lies between 588 and 10228.
</p>
</div>

<ol class="org-ol">
<li><a id="org3a34c97"></a>Alternative Approaches<br />
<div class="outline-text-5" id="text-1-5-2-1">
<p>
If this data was normally distributed it may have been appropriate to consider
bootstrapping the standard error and using a \(t\) distribution, however it is more appropriate to use a
percentile interval for skewed data such as this, in saying that however this method is not considered to be very accurate in the literature and is often too narrow. <sup><a href="#citeproc_bib_item_4">4</a></sup>
</p>

<ul class="org-ul">
<li>It&rsquo;s worth noting that the normal \(t\) value bootstrap offers no advantage over
using a \(t\) distribution (other than being illustrative of bootstrapping
generally) <sup><a href="#citeproc_bib_item_4">4</a></sup></li>
</ul>


<p>
 The <code>boot</code> package is a bootstrapping library common among authors in the data science sphere
 <sup><a href="#citeproc_bib_item_5">5</a></sup> <sup><a href="#citeproc_bib_item_6">6</a></sup> that implements
 confidence intervals consistent with work by Davison and Hinkley
 <sup><a href="#citeproc_bib_item_7">7</a></sup> in there texbook <i>Bootstrap Methods and their Application</i>.
In this work it is provided that the \(BC_{a}\) method of constructing confidence
 intervals is  superior to mere percentile
 methods in terms of accuracy <sup>Ch. <a href="#citeproc_bib_item_3">3</a></sup>, a sentiment echoed in the literature. <sup><a href="#citeproc_bib_item_3">3</a>,Ch. <a href="#citeproc_bib_item_8">8</a></sup>
</p>

<p>
Such methods can be implemented in <b><i>R</i></b> by passing a function to the the <code>boot</code> call as shown in listing <a href="#orgafd2a60">10</a>. This provides a broader interval, providing that the true confidence interval could lie between 1079 and 16227 followers.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>Bootstrap of population mean follower count implementing the \(BC_{a}\) method</label><pre class="src src-r" id="orgafd2a60">xbar_boot <span style="color: #a9a1e1;">&lt;-</span> boot(data = x, statistic = mean_val, R = <span style="color: #da8548; font-weight: bold;">10</span>^<span style="color: #da8548; font-weight: bold;">3</span>)
boot.ci(xbar_boot, conf = <span style="color: #da8548; font-weight: bold;">0.97</span>, type = <span style="color: #98be65;">"bca"</span>, index = <span style="color: #da8548; font-weight: bold;">1</span>)

<span style="color: #5B6268;">## </span><span style="color: #5B6268;">BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Based on 1000 bootstrap replicates</span>
<span style="color: #5B6268;">##</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">CALL :</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">boot.ci(boot.out = xbar_boot, conf = 0.97, type = "bca", index = 1)</span>
<span style="color: #5B6268;">##</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Intervals :</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Level       BCa</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">97%   ( 1079, 16227 )</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Calculations and Intervals on Original Scale</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Warning : BCa Intervals used Extreme Quantiles</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Some BCa intervals may be unstable</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Warning message:</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">In norm.inter(t, adj.alpha) : extreme order statistics used as endpoints</span>
</pre>
</div>

<p>
<a id="org55e9fec"></a>
</p>

<style>.csl-left-margin{float: left; padding-right: 0em;} .csl-right-inline{margin: 0 0 0 1.2em;}</style><h2 class='citeproc-org-bib-h2'>Bibliography</h2>
<div class="csl-bib-body">
  <div class="csl-entry"><a name="citeproc_bib_item_1"></a>
    <div class="csl-left-margin">1.</div><div class="csl-right-inline">Kearney, M. Get Tweets Data on Statuses Identified via Search Query. textemdash Search_tweets. <i>rtweet: Collecting and analyzing Twitter data.</i> (2019).</div>
  </div>
  <div class="csl-entry"><a name="citeproc_bib_item_2"></a>
    <div class="csl-left-margin">2.</div><div class="csl-right-inline">NIST. 1.3.3.14.6. Histogram Interpretation: Skewed (Non-Normal) Right. (2013).</div>
  </div>
  <div class="csl-entry"><a name="citeproc_bib_item_3"></a>
    <div class="csl-left-margin">3.</div><div class="csl-right-inline">Davison, A. C. &#38; Hinkley, D. V. <i>Bootstrap Methods and Their Application</i>. (Cambridge University Press, 1997).</div>
  </div>
  <div class="csl-entry"><a name="citeproc_bib_item_4"></a>
    <div class="csl-left-margin">4.</div><div class="csl-right-inline">Hesterberg, T. C. What Teachers Should Know About the Bootstrap: Resampling in the Undergraduate Statistics Curriculum. <i>The American Statistician</i> <b>69</b>, 371–386 (2015).</div>
  </div>
  <div class="csl-entry"><a name="citeproc_bib_item_5"></a>
    <div class="csl-left-margin">5.</div><div class="csl-right-inline"><i>An Introduction to Statistical Learning: With Applications in R</i>. (Springer, 2013).</div>
  </div>
  <div class="csl-entry"><a name="citeproc_bib_item_6"></a>
    <div class="csl-left-margin">6.</div><div class="csl-right-inline">Wiley, M. &#38; Wiley, J. <i>Advanced R Statistical Programming and Data Models</i>. (Springer Berlin Heidelberg, 2019).</div>
  </div>
  <div class="csl-entry"><a name="citeproc_bib_item_7"></a>
    <div class="csl-left-margin">7.</div><div class="csl-right-inline">Ripley, B. Boot.Ci Function | R Documentation. <i>R Documentation; Nonparametric Bootstrap Confidence Intervals</i> (2020).</div>
  </div>
  <div class="csl-entry"><a name="citeproc_bib_item_8"></a>
    <div class="csl-left-margin">8.</div><div class="csl-right-inline">Carpenter, J. &#38; Bithell, J. Bootstrap Confidence Intervals: When, Which, What? A Practical Guide for Medical Statisticians. <i>Statistics in Medicine</i> <b>19</b>, 1141–1164 (2000).</div>
  </div>
</div>


<p>
<a id="org446ef84"></a>
 
</p>
</div>
</li>
</ol>
</div>

<div id="outline-container-org7a147aa" class="outline-4">
<h4 id="org7a147aa"><span class="section-number-4">1.5.3</span> d.) Estimate a Confidence Interval for the population mean Friend Counts</h4>
<div class="outline-text-4" id="text-1-5-3">
<p>
A Confidence interval for the population mean friend counts may be constructed in a like wise fashion as shown in listings <a href="#orge81d44e">11</a>. This provides that the 97% confidence interval for the population mean friend count is between 384 and 502 (or 387 and 496 if the \(BC_{a}\) method used, they&rsquo;re quite close and so the more conservative percentile method will be accepted).
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 11: </span>Bootstrap of population mean follower count</label><pre class="src src-R" id="orge81d44e"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">d.) Estimate a Confidence Interval for the populattion mean Friend Count ===</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Using a Percentile Method #####################################################</span>
ybar_boot_loop <span style="color: #a9a1e1;">&lt;-</span> replicate(<span style="color: #da8548; font-weight: bold;">10</span>^<span style="color: #da8548; font-weight: bold;">3</span>, {
  s <span style="color: #a9a1e1;">&lt;-</span> sample(y, replace = <span style="color: #ECBE7B;">TRUE</span>)
  mean(s)
  })
quantile(ybar_boot_loop, c(<span style="color: #da8548; font-weight: bold;">0.015</span>, <span style="color: #da8548; font-weight: bold;">0.985</span>)

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Using BCA Method #############################################################</span>
<span style="color: #c678dd;">mean_val</span> <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #51afef;">function</span>(data, index) {
  X = data[index]
  <span style="color: #51afef;">return</span>(mean(X))
}

xbar_boot <span style="color: #a9a1e1;">&lt;-</span> boot(data = y, statistic = mean_val, R = <span style="color: #da8548; font-weight: bold;">10</span>^<span style="color: #da8548; font-weight: bold;">3</span>)
boot.ci(xbar_boot, conf = <span style="color: #da8548; font-weight: bold;">0.97</span>, type = <span style="color: #98be65;">"bca"</span>, index = <span style="color: #da8548; font-weight: bold;">1</span>)


<span style="color: #5B6268;">##     </span><span style="color: #5B6268;">1.5%    98.5%</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">383.7619 501.5903</span>
<span style="color: #5B6268;">##</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Based on 1000 bootstrap replicates</span>
<span style="color: #5B6268;">##</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">CALL :</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">boot.ci(boot.out = xbar_boot, conf = 0.97, type = "bca", index = 1)</span>
<span style="color: #5B6268;">##</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Intervals :</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Level       BCa</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">97%   (386.8, 496.7 )</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Calculations and Intervals on Original Scale</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Some BCa intervals may be unstable</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6486b81" class="outline-3">
<h3 id="org6486b81"><span class="section-number-3">1.6</span> <span class="todo FIXME">FIXME</span> 8.1.6 Estimate a 97% Confidence Interval for the High Friend Count Proportion</h3>
<div class="outline-text-3" id="text-1-6">
<p>
In order to bootstrap a confidence interval for the proportion of users with
above average follower counts, repeteadly draw random samples from an infinitely
large population composed entirely of the sample, and record the sampled
proportion. this can be acheived by resampling the observations of above and
below as shown in listing <a href="#orge28ea9f">12</a>.
</p>

<p>
This provides that:
</p>
<ul class="org-ul">
<li>The 97% confidence interval for the population proportion of users that have an above average number of friends is between 0.24 and 0.31.
<ul class="org-ul">
<li>i.e. The probability of any given sample containing the population mean within this interval would be 97%, although  that doesn&rsquo;t however mean that there is a 97% probability that this interval contains the value, merely that we may be 97% <i>confident</i></li>
</ul></li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 12: </span>Bootstrap of Proportion of Friends above average</label><pre class="src src-R" id="orge28ea9f"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">8.1.6 High Friend Count Proportion -------------------------------------------</span>
prop <span style="color: #a9a1e1;">&lt;-</span> factor(c(<span style="color: #98be65;">"Below"</span>, <span style="color: #98be65;">"Above"</span>))
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">1 is above average, 2 is below</span>
py_hat_bt <span style="color: #a9a1e1;">&lt;-</span> replicate(<span style="color: #da8548; font-weight: bold;">10</span>^<span style="color: #da8548; font-weight: bold;">3</span>, {
  rs      <span style="color: #a9a1e1;">&lt;-</span> sample(c(<span style="color: #98be65;">"Below"</span>, <span style="color: #98be65;">"Above"</span>),
                    size = length(y),
                    prob = c(py_hat, <span style="color: #da8548; font-weight: bold;">1</span>-py_hat),
                    replace = <span style="color: #ECBE7B;">TRUE</span>)
isabove <span style="color: #a9a1e1;">&lt;-</span> rs == <span style="color: #98be65;">"Above"</span>
mean(isabove)
})
quantile(py_hat_bt, c(<span style="color: #da8548; font-weight: bold;">0.015</span>, <span style="color: #da8548; font-weight: bold;">0.985</span>))


<span style="color: #5B6268;">##      </span><span style="color: #5B6268;">1.5%     98.5%</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">0.2399021 0.3072215</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">&gt; &gt; &gt; . + &gt; &gt; &gt;</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Based on 1000 bootstrap replicates</span>
<span style="color: #5B6268;">##</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">CALL :</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">boot.ci(boot.out = py_hat_boot, conf = 0.97, type = "bca")</span>
<span style="color: #5B6268;">##</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Intervals :</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Level       BCa</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">97%   ( 0.2399,  0.3072 )</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Calculations and Intervals on Original Scale</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org80bf579" class="outline-3">
<h3 id="org80bf579"><span class="section-number-3">1.7</span> 8.1.7 Is the Number of Friends Independent to the Number of Followers</h3>
<div class="outline-text-3" id="text-1-7">
<p>
One method to determine whether or not the number of followers is independent of the number of friends is to bin the counts and determine whether or not the distribution of users across those counts is consistent with the hypothesis of independence.
</p>
</div>

<div id="outline-container-org42dce26" class="outline-4">
<h4 id="org42dce26"><span class="section-number-4">1.7.1</span> Bin the Follower and Friend Categories</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
The counts may be binned by performing a logical interval test as shown in listing <a href="#org3a1849a">13</a>.
</p>

<div class="org-src-container">
<pre class="src src-R" id="org3a1849a"><span style="color: #5B6268;">## </span><span style="color: #5B6268;">Assign Categories</span>
x_df <span style="color: #a9a1e1;">&lt;-</span> data.frame(x)
x_df$cat[<span style="color: #da8548; font-weight: bold;">0</span>       &lt;= x_df$x &amp; x_df$x &lt; <span style="color: #da8548; font-weight: bold;">100</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"Tens"</span>
x_df$cat[<span style="color: #da8548; font-weight: bold;">100</span>     &lt;= x_df$x &amp; x_df$x &lt; <span style="color: #da8548; font-weight: bold;">1000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"Hundreds"</span>
x_df$cat[<span style="color: #da8548; font-weight: bold;">1000</span>    &lt;= x_df$x &amp; x_df$x &lt; <span style="color: #da8548; font-weight: bold;">2000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"1Thousands"</span>
x_df$cat[<span style="color: #da8548; font-weight: bold;">2000</span>    &lt;= x_df$x &amp; x_df$x &lt; <span style="color: #da8548; font-weight: bold;">3000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"2Thousands"</span>
x_df$cat[<span style="color: #da8548; font-weight: bold;">3000</span>    &lt;= x_df$x &amp; x_df$x &lt; <span style="color: #da8548; font-weight: bold;">4000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"3Thousands"</span>
x_df$cat[<span style="color: #da8548; font-weight: bold;">4000</span>    &lt;= x_df$x &amp; x_df$x &lt; <span style="color: #da8548; font-weight: bold;">5000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"4Thousands"</span>
x_df$cat[<span style="color: #da8548; font-weight: bold;">5000</span>    &lt;= x_df$x &amp; x_df$x &lt; <span style="color: #ECBE7B;">Inf</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"5ThousandOrMore"</span>

<span style="color: #5B6268;">### </span><span style="color: #5B6268;">Make a factor</span>
x_df$cat <span style="color: #a9a1e1;">&lt;-</span> factor(x_df$cat, levels = var_levels, ordered = <span style="color: #ECBE7B;">TRUE</span>)

<span style="color: #5B6268;">### </span><span style="color: #5B6268;">Determine Frequencies</span>
(x_freq <span style="color: #a9a1e1;">&lt;-</span> table(x_df$cat) <span style="color: #a9a1e1;">%&gt;%</span> as.matrix())

<span style="color: #5B6268;">## </span><span style="color: #5B6268;">** b) Find the Friend Count Frequency ===========================================</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Assign Categories</span>
y_df <span style="color: #a9a1e1;">&lt;-</span> data.frame(y)
y_df$cat[<span style="color: #da8548; font-weight: bold;">0</span>       &lt;= y_df$y &amp; y_df$y &lt; <span style="color: #da8548; font-weight: bold;">100</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"Tens"</span>
y_df$cat[<span style="color: #da8548; font-weight: bold;">100</span>     &lt;= y_df$y &amp; y_df$y &lt; <span style="color: #da8548; font-weight: bold;">1000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"Hundreds"</span>
y_df$cat[<span style="color: #da8548; font-weight: bold;">1000</span>    &lt;= y_df$y &amp; y_df$y &lt; <span style="color: #da8548; font-weight: bold;">2000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"1Thousands"</span>
y_df$cat[<span style="color: #da8548; font-weight: bold;">2000</span>    &lt;= y_df$y &amp; y_df$y &lt; <span style="color: #da8548; font-weight: bold;">3000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"2Thousands"</span>
y_df$cat[<span style="color: #da8548; font-weight: bold;">3000</span>    &lt;= y_df$y &amp; y_df$y &lt; <span style="color: #da8548; font-weight: bold;">4000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"3Thousands"</span>
y_df$cat[<span style="color: #da8548; font-weight: bold;">4000</span>    &lt;= y_df$y &amp; y_df$y &lt; <span style="color: #da8548; font-weight: bold;">5000</span>] <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"4Thousands"</span>
y_df$cat[<span style="color: #da8548; font-weight: bold;">5000</span>    &lt;= y_df$y &amp; y_df$y &lt; <span style="color: #ECBE7B;">Inf</span>]  <span style="color: #a9a1e1;">&lt;-</span> <span style="color: #98be65;">"5ThousandOrMore"</span>

<span style="color: #5B6268;">### </span><span style="color: #5B6268;">Make a factor</span>
y_df$cat <span style="color: #a9a1e1;">&lt;-</span> factor(y_df$cat, levels = var_levels, ordered = <span style="color: #ECBE7B;">TRUE</span>)

<span style="color: #5B6268;">### </span><span style="color: #5B6268;">Determine Frequencies</span>
(y_freq <span style="color: #a9a1e1;">&lt;-</span> table(y_df$cat) <span style="color: #a9a1e1;">%&gt;%</span> as.matrix())
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbacd291" class="outline-4">
<h4 id="orgbacd291"><span class="section-number-4">1.7.2</span> Find the Group frequency</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
These values may be tabluated in order to count the occurence of users among these categories as shown in listing <a href="#org62a58c7">13</a> and table <a href="#org399de46">1</a>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 13: </span>Tabulate the binned counts for the distribution of users among among amount and status.</label><pre class="src src-R" id="org62a58c7">vals <span style="color: #a9a1e1;">&lt;-</span> t(cbind(x_freq, y_freq))
rownames(vals) <span style="color: #a9a1e1;">&lt;-</span> c(<span style="color: #98be65;">"Followers.x"</span>, <span style="color: #98be65;">"followers.y"</span>)
vals

<span style="color: #5B6268;">##             </span><span style="color: #5B6268;">Tens Hundreds 1Thousands 2Thousands 3Thousands 4Thousands</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Followers.x  421      317         39         11          9          2</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">followers.y  262      476         47         15          6          9</span>
<span style="color: #5B6268;">##             </span><span style="color: #5B6268;">5ThousandOrMore</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">Followers.x              18</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">followers.y               2</span>
</pre>
</div>

<table id="org399de46" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Table of Binned Friend and Follower counts, transposed relative to code.</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-right"><b><b><i>Followers</i></b></b></td>
<td class="org-right"><b><b><i>Friends</i></b></b></td>
</tr>

<tr>
<td class="org-left"><i>Tens</i></td>
<td class="org-right">421</td>
<td class="org-right">262</td>
</tr>

<tr>
<td class="org-left"><i>Hundreds</i></td>
<td class="org-right">317</td>
<td class="org-right">476</td>
</tr>

<tr>
<td class="org-left"><i>1 - Thousands</i></td>
<td class="org-right">39</td>
<td class="org-right">47</td>
</tr>

<tr>
<td class="org-left"><i>2 - Thousands</i></td>
<td class="org-right">11</td>
<td class="org-right">15</td>
</tr>

<tr>
<td class="org-left"><i>3 - Thousands</i></td>
<td class="org-right">9</td>
<td class="org-right">6</td>
</tr>

<tr>
<td class="org-left"><i>4 - Thousands</i></td>
<td class="org-right">2</td>
<td class="org-right">9</td>
</tr>

<tr>
<td class="org-left"><i>5 Thousand or More</i></td>
<td class="org-right">18</td>
<td class="org-right">2</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org0bca06c" class="outline-4">
<h4 id="org0bca06c"><span class="section-number-4">1.7.3</span> Find the Expected Counts under each group and test for independence</h4>
<div class="outline-text-4" id="text-1-7-3">
<p>
The expected count of each cell, under the assumption that the two metrics are
independent, will be the proportion users per bracket multiplied by the number
of users in that status group. This implies that any cell will be:
</p>

<ul class="org-ul">
<li>the product of the row sum, multiplied by the column sum divided by the number of counts.</li>
</ul>

<p>
This can be equivalently expressed as an outer product as shown in equation
\eqref{eq:1}, in <b><i>R</i></b> this operation is denoted by the <code>%o%</code> operator, which is
shorthand for the <code>outer()</code> function, this and other summary statistics may be
evaluated as shown in listing <a href="#orge5b665e">14</a>.
</p>

<p>
The outer product is such that:
</p>


<p>
\[
\mathbf{u} \otimes \mathbf {v} =\mathbf {u} \mathbf {v} ^{\textsf {T}}={\begin{bmatrix}u_{1}\\u_{2}\\u_{3}\\u_{4}\end{bmatrix}}{\begin{bmatrix}v_{1}&v_{2}&v_{3}\end{bmatrix}}={\begin{bmatrix}u_{1}v_{1}&u_{1}v_{2}&u_{1}v_{3}\\u_{2}v_{1}&u_{2}v_{2}&u_{2}v_{3}\\u_{3}v_{1}&u_{3}v_{2}&u_{3}v_{3}\\u_{4}v_{1}&u_{4}v_{2}&u_{4}v_{3}\end{bmatrix}}.
\]
</p>

<p>
This means the matrix of expected frequencies can be expressed as an outer product thusly:
</p>

\begin{align}
\label{org63d8162}
\mathbf{\vec{e}}= \frac{1}{n} \times \begin{bmatrix} \sum^{n}_{j= 1} \left[ o_{1j} \right] \\  \sum^{n}_{j= 1}
\left[ o_{2j} \right]  \\ \sum^{n}_{j= 1} \left[ o_{3j} \right]   \\
\sum^{n}_{j= 1} \left[ o_{4j} \right]  \\ \vdots  \\
\sum^{n}_{j= 1} \left[ o_{nj} \right]     \end{bmatrix} 
\begin{bmatrix}  \sum^{n}_{j= 1} \left[ o_{i1}  \right] \\  \sum^{n}_{j= 1}
\left[ o_{i2}  \right] \\ \sum^{n}_{j= 1} \left[ o_{i3}  \right] \\ \cdots \\
\sum^{n}_{j= 1} \left[ o_{in}  \right]   \end{bmatrix}  ^{\normalsize \mathrm{T}} \label{eq:1}
\end{align}

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 14: </span>Calculate Expected frequency of values under the assumption of independence.</label><pre class="src src-R" id="orge5b665e"><span style="color: #5B6268;">## </span><span style="color: #5B6268;">***** Calculate Summary Stats</span>
n <span style="color: #a9a1e1;">&lt;-</span> sum(vals)
bracket_prop <span style="color: #a9a1e1;">&lt;-</span> colSums(vals) / n
metric_prop  <span style="color: #a9a1e1;">&lt;-</span> rowSums(vals) / n
o <span style="color: #a9a1e1;">&lt;-</span> vals
e <span style="color: #a9a1e1;">&lt;-</span> rowSums(vals) <span style="color: #a9a1e1;">%o%</span> colSums(vals) / n
chi_obs <span style="color: #a9a1e1;">&lt;-</span> sum((e-o)^<span style="color: #da8548; font-weight: bold;">2</span>/e)
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="org70495d2"></a>Testing Independence<br />
<div class="outline-text-5" id="text-1-7-3-1">
<p>
In order to test whether or not the distribution of users among brackets is
independent of being a follower or friend a \(\chi^{2}\) test may be used, this
can be evaluated from a model or simulated, in <b><i>R</i></b>, the simulated test is
shown in listing <a href="#orgf6e14f2">15</a>, this provides a \(p\) -value &lt; 0.0005, which means that the hypothesis of independence may be rejected with a high degree of certainty.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 15: </span>Chi-Square testing for independence between friend and follower bin categories.</label><pre class="src src-R" id="orgf6e14f2">chisq.test(vals, simulate.p.value = <span style="color: #ECBE7B;">TRUE</span>)


<span style="color: #5B6268;">## </span><span style="color: #5B6268;"> Pearson's Chi-squared test with simulated p-value (based on 2000</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;"> replicates)</span>
<span style="color: #5B6268;">##</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">data:  vals</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">X-squared = 88.109, df = NA, p-value = 0.0004998</span>
</pre>
</div>
</div>

<ol class="org-ol">
<li><a id="org391784e"></a>From First Principles<br />
<div class="outline-text-6" id="text-1-7-3-1-1">
<p>
The \(\chi^{2}\) statistic may be performed from first principles by randomly
sampling the values at the rate at which they occured, tabulating those counts, measuring the \(\chi^{2}\) -value and then repeating this many times.
</p>

<p>
Because the samples are random they must be independent and average number of
positives is hence an estimate for the <i>FPR</i>, which is in turn an estimate for
the \(p\) -value. This technique is demonstrated in listing <a href="#org6b68921">16</a>, the p-value
being returned as 0.0004, this value is consistent with the value produced by
<b><i>R</i></b>&rsquo;s built in <code>chisq.test</code> function and so is accepted.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 16: </span>Performing a \(\chi^{2}\) statistic from first principles</label><pre class="src src-R" id="org6b68921"><span style="color: #5B6268;">## </span><span style="color: #5B6268;">***** Create Vectors of factor levels</span>
brackets <span style="color: #a9a1e1;">&lt;-</span> unique(x_df$cat)
metrics <span style="color: #a9a1e1;">&lt;-</span> c(<span style="color: #98be65;">"follower"</span>, <span style="color: #98be65;">"friend"</span>)

<span style="color: #5B6268;">## </span><span style="color: #5B6268;">***** Simulate the data Assuming H_0</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">I.e. assuming that the null hypothesis is true in that</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">the brackets assigned to followers are independent of the friends</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">(this is a symmetric relation)</span>
<span style="color: #5B6268;">## </span><span style="color: #5B6268;">[[file:~/Notes/Org/AbstractAlgebraNotes.org::#relation-types][Relation Types]]</span>

s <span style="color: #a9a1e1;">&lt;-</span> replicate(<span style="color: #da8548; font-weight: bold;">10</span>^<span style="color: #da8548; font-weight: bold;">4</span>,{
  <span style="color: #5B6268;">## </span><span style="color: #5B6268;">Sample the set of Metrics</span>
  m <span style="color: #a9a1e1;">&lt;-</span> sample(metrics, size = n, replace = <span style="color: #ECBE7B;">TRUE</span>, prob = metric_prop)

  <span style="color: #5B6268;">## </span><span style="color: #5B6268;">Sample the set of Brackets (i.e. which performance bracket the user falls in)</span>
  b <span style="color: #a9a1e1;">&lt;-</span> sample(brackets, size = n, replace = <span style="color: #ECBE7B;">TRUE</span>, prob = bracket_prop)

  <span style="color: #5B6268;">## </span><span style="color: #5B6268;">Make a table of results</span>
  o <span style="color: #a9a1e1;">&lt;-</span> table(m, b)
  o

  <span style="color: #5B6268;">## </span><span style="color: #5B6268;">Find What the expected value would be</span>
  e_sim <span style="color: #a9a1e1;">&lt;-</span> t(colSums(e) <span style="color: #a9a1e1;">%o%</span> rowSums(e) / n)

  <span style="color: #5B6268;">## </span><span style="color: #5B6268;">Calculate the Chi Stat</span>
  chi_sim <span style="color: #a9a1e1;">&lt;-</span> sum((e_sim-o)^<span style="color: #da8548; font-weight: bold;">2</span>/e_sim)
  chi_sim

  <span style="color: #5B6268;">## </span><span style="color: #5B6268;">Is this more extreme, i.e. would we reject null hypothesis?</span>
  chi_sim &gt; chi_obs

})

mean(s)
</pre>
</div>
</div>
</li>
</ol>
</li>
</ol>
</div>
<div id="outline-container-orgd76a51e" class="outline-4">
<h4 id="orgd76a51e"><span class="section-number-4">1.7.4</span> <span class="todo FIXME">FIXME</span> Conclusion</h4>
<div class="outline-text-4" id="text-1-7-4">
<p>
The \(p\) -value measures the probability of rejecting the null hypothesis when it is true, i.e. the probability of a detecting a <i>false positive</i>, a very small \(p\) -value is hence good evidence that the null hypothesis should be rejected (because doing so would unlikely to be a mistake).
</p>

<p>
In saying that however the \(p\) -value is distinct from the <i>power</i> statistic, which is a measure of <i>/the probability of accepting the alternative hypothesis</i> when it is true, a low \(p\) -value is not a measurement of the probability of being correct.
</p>

<p>
Hence me way conclude, with a high degree of certainty, that the follower and friend counts are not independent of one another.
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Ryan Greenup</p>
<p class="date">Created: 2020-04-28 Tue 20:23</p>
</div>
</body>
</html>
