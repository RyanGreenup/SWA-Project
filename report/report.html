<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Analysing Twitter for Ubisoft</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style>
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  
  
  
  
  
  
  
  
  
  
  
</head>
<body>
<style>
/*! normalize.css v2.1.3 | MIT License | git.io/normalize */

/* ==========================================================================
 * Taken from [Github](https://raw.githubusercontent.com/gongzhitaao/orgcss/master/src/css/org.css)
   ========================================================================== */

/* Fixing the scaling:

1. comment out the section [[@media screen and (min-width: 600px) {][here]] at about
2.   max-width: 70em; is the next issue, it was originally set at only 40, which is too small.
 + 70 is a better compromise


@import "normalize";
@import "htmlize";

$sans: Helvetica, sans-serif;
$serif: Georgia, serif;
$monospace: Lucida Console, monospace;
$code-size: 80%;
$smaller: 90%;
$max-width: 1125px; /* iPhone X is 1125x2436, ipads are about 2000 * 3000 */

body {
    width: 95%;
    margin: 2% auto;
    font-size: 14px;
    line-height: 1.4em;
    font-family: $serif;
    color: #333;
}



@media screen and (min-width: 600px) {
    body {
        font-size: 18px;
    }
}

@media screen and (min-width: 910px) {
    body {
        width: 1100px;
    }
}

::selection {
    background: #D6EDFF;
}

p {
    margin: 1em auto;
}

ol,ul {
    margin: 0 auto;
}

dl {
    margin: 0 auto;
}

.title {
    text-align: center;
    margin: 0.8em auto;
    color: black;
}

.subtitle {
    text-align: center;
    font-size: 1.1em;
    line-height: 1.4;
    font-weight: bold;
    margin: 1em auto;
}

.abstract {
    margin: auto;
    width: 80%;
    font-style: italic;
}

.abstract p:last-of-type:before {
    content: "    ";
    white-space: pre;
}

.status {
    font-size: $smaller;
    margin: 2em auto;
}

[class^="section-number-"] {
    margin-right: .5em;
}

[id^="orgheadline"] {
    clear: both;
}

#footnotes {
    font-size: $smaller;
}

.footpara {
    display: inline;
    margin: .2em auto;
}

.footdef {
    margin-bottom: 1em;
}

.footdef sup {
    padding-right: .5em;
}

a {
    color: #527d9a;
    text-decoration: none;
}

a:hover {
    color: #003355;
    border-bottom: 1px dotted;
}

figure {
    padding: 0px;
    margin: 1em auto;
    text-align: center;
}

img {
    max-width: 100%;
    vertical-align: middle;
}

.MathJax_Display {
    margin: 0!important;
    width: $smaller!important;
}

h1,h2,h3,h4,h5,h6 {
    color: #A5573E;
    line-height: 1em;
    font-family: $sans;
}

h1,h2,h3 {
    line-height: 1.4em;
}

h4,h5,h6 {
    font-size: 1em;
}

@media screen and (min-width: 600px) {
    h1 {
        font-size: 2em;
    }
    h2 {
        font-size: 1.5em;
    }
    h3 {
        font-size: 1.3em;
    }
    h1,h2,h3 {
        line-height: 1.4em;
    }
    h4,h5,h6 {
        font-size: 1.1em;
    }
}

dt {
    font-weight: bold;
}

/* table */

table {
    margin: 1em auto;
    border-top: 2px solid;
    border-bottom: 2px solid;
    border-collapse: collapse;
}

thead {
    border-bottom: 2px solid;
}

table td + td, table th + th {
    border-left: 1px solid gray;
}

table tr {
    border-top: 1px solid lightgray;
}

td,th {
    padding: 0.3em 0.6em;
    vertical-align: middle;
}

caption.t-above {
    caption-side: top;
}

caption.t-bottom {
    caption-side: bottom;
}

caption {
    margin-bottom: 0.3em;
}

figcaption {
    margin-top: 0.3em;
}

th.org-right {
    text-align: center;
}

th.org-left {
    text-align: center;
}

th.org-center {
    text-align: center;
}

td.org-right {
    text-align: right;
}

td.org-left {
    text-align: left;
}

td.org-center {
    text-align: center;
}

blockquote {
    margin: 1em 2em;
    padding-left: 1em;
    border-left: 3px solid #ccc;
}

kbd {
    background-color: #f7f7f7;
    font-size: $code-size;
    margin: 0 .1em;
    padding: .1em .6em;
}

.todo {
    background-color: red;
    color: white;
    padding: .1em 0.3em;
    border-radius: 3px;
    background-clip: padding-box;
    font-size: $code-size;
    font-family: $monospace;
    line-height: 1;
}

.done {
    background-color: green;
    color: white;
    padding: .1em 0.3em;
    border-radius: 3px;
    background-clip: padding-box;
    font-size: $code-size;
    font-family: $monospace;
    line-height: 1;
}

.priority {
    color: orange;
    font-family: $monospace;
}

/* Because tag span is set to float.  This is more like a hacking.  Maybe we
   need a cleaner solution. */
#table-of-contents li {
    clear: both;
}

.tag {
    font-family: $monospace;
    font-size: 0.7em;
    font-weight: normal;
}

.tag span {
    padding: 0.3em 0.3em;
    float: right;
    margin-right: .5em;
    border: 1px solid #bbb;
    border-radius: 3px;
    background-clip: padding-box;
    color: #333;
    background-color: #eee;
    line-height: 1;
}

.timestamp {
    color: #bebebe;
    font-size: $smaller;
}

.timestamp-kwd {
    color: #5f9ea0;
}

.org-right {
    margin-left: auto;
    margin-right: 0px;
    text-align: right;
}

.org-left {
    margin-left: 0px;
    margin-right: auto;
    text-align: left;
}

.org-center {
    margin-left: auto;
    margin-right: auto;
    text-align: center;
}

.underline {
    text-decoration: underline;
}

#postamble p, #preamble p {
    font-size: $smaller;
    margin: .2em;
}

p.verse {
    margin-left: 3%;
}

:not(pre) > code {
    padding: 2px 5px;
    margin: auto 1px;
    border: 1px solid #DDD;
    border-radius: 3px;
    background-clip: padding-box;
    color: #333;
    font-size: $code-size;
}

.org-src-container {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    font-family: $monospace;
    font-size: $code-size;
    margin: 1em auto;
    padding: 0.1em 0.5em;
    position: relative;
}

.org-src-container>pre {
    overflow: auto;
}

.org-src-container>pre:before {
    display: block;
    position: absolute;
    background-color: #b3b3b3;
    top: 0;
    right: 0;
    padding: 0 0.5em;
    border-bottom-left-radius: 8px;
    border: 0;
    color: white;
    font-size: $code-size;
}

/* from http://demo.thi.ng/org-spec/ */

.org-src-container>pre.src-sh:before {
    content: 'sh';
}
.org-src-container>pre.src-bash:before {
    content: 'bash';
}
.org-src-container>pre.src-emacs-lisp:before {
    content: 'Emacs Lisp';
}
.org-src-container>pre.src-R:before {
    content: 'R';
}
.org-src-container>pre.src-org:before {
    content: 'Org';
}
.org-src-container>pre.src-cpp:before {
    content: 'C++';
}
.org-src-container>pre.src-c:before {
    content: 'C';
}
.org-src-container>pre.src-html:before {
    content: 'HTML'
}
.org-src-container>pre.src-js:before {
    content: 'Javascript'
}
.org-src-container>pre.src-javascript:before {
    content: 'Javascript'
}

// More languages from http://orgmode.org/worg/org-contrib/babel/languages.html

.org-src-container>pre.src-abc:before {
    content: 'ABC';
}
.org-src-container>pre.src-asymptote:before {
    content: 'Asymptote';
}
.org-src-container>pre.src-awk:before {
    content: 'Awk';
}
.org-src-container>pre.src-C:before {
    content: 'C';
}
.org-src-container>pre.src-calc:before {
    content: 'Calc';
}
.org-src-container>pre.src-clojure:before {
    content: 'Clojure';
}
.org-src-container>pre.src-comint:before {
    content: 'comint';
}
.org-src-container>pre.src-css:before {
    content: 'CSS';
}
.org-src-container>pre.src-D:before {
    content: 'D';
}
.org-src-container>pre.src-ditaa:before {
    content: 'Ditaa';
}
.org-src-container>pre.src-dot:before {
    content: 'Dot';
}
.org-src-container>pre.src-ebnf:before {
    content: 'ebnf';
}
.org-src-container>pre.src-forth:before {
    content: 'Forth';
}
.org-src-container>pre.src-F90:before {
    content: 'Fortran';
}
.org-src-container>pre.src-gnuplot:before {
    content: 'Gnuplot';
}
.org-src-container>pre.src-haskell:before {
    content: 'Haskell';
}
.org-src-container>pre.src-io:before {
    content: 'Io';
}
.org-src-container>pre.src-java:before {
    content: 'Java';
}
.org-src-container>pre.src-latex:before {
    content: 'LaTeX';
}
.org-src-container>pre.src-ledger:before {
    content: 'Ledger';
}
.org-src-container>pre.src-ly:before {
    content: 'Lilypond';
}
.org-src-container>pre.src-lisp:before {
    content: 'Lisp';
}
.org-src-container>pre.src-makefile:before {
    content: 'Make';
}
.org-src-container>pre.src-matlab:before {
    content: 'Matlab';
}
.org-src-container>pre.src-max:before {
    content: 'Maxima';
}
.org-src-container>pre.src-mscgen:before {
    content: 'Mscgen';
}
.org-src-container>pre.src-Caml:before {
    content: 'Objective';
}
.org-src-container>pre.src-octave:before {
    content: 'Octave';
}
.org-src-container>pre.src-org:before {
    content: 'Org';
}
.org-src-container>pre.src-perl:before {
    content: 'Perl';
}
.org-src-container>pre.src-picolisp:before {
    content: 'Picolisp';
}
.org-src-container>pre.src-plantuml:before {
    content: 'PlantUML';
}
.org-src-container>pre.src-python:before {
    content: 'Python';
}
.org-src-container>pre.src-ruby:before {
    content: 'Ruby';
}
.org-src-container>pre.src-sass:before {
    content: 'Sass';
}
.org-src-container>pre.src-scala:before {
    content: 'Scala';
}
.org-src-container>pre.src-scheme:before {
    content: 'Scheme';
}
.org-src-container>pre.src-screen:before {
    content: 'Screen';
}
.org-src-container>pre.src-sed:before {
    content: 'Sed';
}
.org-src-container>pre.src-shell:before {
    content: 'shell';
}
.org-src-container>pre.src-shen:before {
    content: 'Shen';
}
.org-src-container>pre.src-sql:before {
    content: 'SQL';
}
.org-src-container>pre.src-sqlite:before {
    content: 'SQLite';
}
.org-src-container>pre.src-stan:before {
    content: 'Stan';
}
.org-src-container>pre.src-vala:before {
    content: 'Vala';
}
.org-src-container>pre.src-axiom:before {
    content: 'Axiom';
}
.org-src-container>pre.src-browser:before {
    content: 'HTML';
}
.org-src-container>pre.src-cypher:before {
    content: 'Neo4j';
}
.org-src-container>pre.src-elixir:before {
    content: 'Elixir';
}
.org-src-container>pre.src-request:before {
    content: 'http';
}
.org-src-container>pre.src-ipython:before {
    content: 'iPython';
}
.org-src-container>pre.src-kotlin:before {
    content: 'Kotlin';
}
.org-src-container>pre.src-Flavored Erlang  lfe:before {
    content: 'Lisp';
}
.org-src-container>pre.src-mongo:before {
    content: 'MongoDB';
}
.org-src-container>pre.src-prolog:before {
    content: 'Prolog';
}
.org-src-container>pre.src-rec:before {
    content: 'rec';
}
.org-src-container>pre.src-ML  sml:before {
    content: 'Standard';
}
.org-src-container>pre.src-Translate  translate:before {
    content: 'Google';
}
.org-src-container>pre.src-typescript:before {
    content: 'Typescript';
}
.org-src-container>pre.src-rust:before {
    content: 'Rust';
}

.inlinetask {
    background: #ffffcc;
    border: 2px solid gray;
    margin: 10px;
    padding: 10px;
}

#org-div-home-and-up {
    font-size: 70%;
    text-align: right;
    white-space: nowrap;
}

.linenr {
    font-size: $smaller;
}

.code-highlighted {
    background-color: #ffff00;
}

#bibliography {
    font-size: $smaller;
}

#bibliography table {
    width: 100%;
}

.creator {
    display: block;
}

@media screen and (min-width: 600px) {
    .creator {
        display: inline;
        float: right;
    }
}


























/* ==========================================================================
The typical Github Style:
   ========================================================================== */





/**
 * Correct `block` display not defined in IE 8/9.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 8/9.
 */

audio,
canvas,
video {
    display: inline-block;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address `[hidden]` styling not present in IE 8/9.
 * Hide the `template` element in IE, Safari, and Firefox < 22.
 */

[hidden],
template {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Set default font family to sans-serif.
 * 2. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    font-family: sans-serif; /* 1 */
    -ms-text-size-adjust: 100%; /* 2 */
    -webkit-text-size-adjust: 100%; /* 2 */
}

/**
 * Remove default margin.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Remove the gray background color from active links in IE 10.
 */

a {
    background: transparent;
}

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address variable `h1` font-size and margin within `section` and `article`
 * contexts in Firefox 4+, Safari 5, and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

/**
 * Address styling not present in IE 8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Correct font family set oddly in Safari 5 and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre-wrap;
}

/**
 * Set consistent quote types.
 */

q {
    quotes: "\201C" "\201D" "\2018" "\2019";
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * Remove border when inside `a` element in IE 8/9.
 */

img {
    border: 0;
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 8/9 and Safari 5.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct `color` not being inherited in IE 8/9.
 * 2. Remove padding so people aren't caught out if they zero out fieldsets.
 */

legend {
    border: 0; /* 1 */
    padding: 0; /* 2 */
}

/**
 * 1. Correct font family not being inherited in all browsers.
 * 2. Correct font size not being inherited in all browsers.
 * 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome.
 */

button,
input,
select,
textarea {
    font-family: inherit; /* 1 */
    font-size: 100%; /* 2 */
    margin: 0; /* 3 */
}

/**
 * Address Firefox 4+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to `content-box` in IE 8/9/10.
 * 2. Remove excess padding in IE 8/9/10.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 4+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

.go-top {
position: fixed;
bottom: 2em;
right: 2em;
text-decoration: none;
background-color: #E0E0E0;
font-size: 12px;
padding: 1em;
display: inline;
}

/* Github css  max-width: 70em for decent width size*/

html,body{        margin: auto;
    padding-right: 1em;
    padding-left: 1em;
    max-width: 70em; color:black;}*:not('#mkdbuttons'){margin:0;padding:0}body{font:13.34px helvetica,arial,freesans,clean,sans-serif;-webkit-font-smoothing:subpixel-antialiased;line-height:1.4;padding:3px;background:#fff;border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px}p{margin:1em 0}a{color:#4183c4;text-decoration:none}body{background-color:#fff;padding:30px;margin:15px;font-size:14px;line-height:1.6}body>*:first-child{margin-top:0!important}body>*:last-child{margin-bottom:0!important}@media screen{body{box-shadow:0 0 0 1px #cacaca,0 0 0 4px #eee}}h1,h2,h3,h4,h5,h6{margin:20px 0 10px;padding:0;font-weight:bold;-webkit-font-smoothing:subpixel-antialiased;cursor:text}h1{font-size:28px;color:#000}h2{font-size:24px;border-bottom:1px solid #ccc;color:#000}h3{font-size:18px;color:#333}h4{font-size:16px;color:#333}h5{font-size:14px;color:#333}h6{color:#777;font-size:14px}p,blockquote,table,pre{margin:15px 0}ul{padding-left:30px}ol{padding-left:30px}ol li ul:first-of-type{margin-top:0}hr{background:transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;border:0 none;color:#ccc;height:4px;padding:0}body>h2:first-child{margin-top:0;padding-top:0}body>h1:first-child{margin-top:0;padding-top:0}body>h1:first-child+h2{margin-top:0;padding-top:0}body>h3:first-child,body>h4:first-child,body>h5:first-child,body>h6:first-child{margin-top:0;padding-top:0}a:first-child h1,a:first-child h2,a:first-child h3,a:first-child h4,a:first-child h5,a:first-child h6{margin-top:0;padding-top:0}h1+p,h2+p,h3+p,h4+p,h5+p,h6+p,ul li>:first-child,ol li>:first-child{margin-top:0}dl{padding:0}dl dt{font-size:14px;font-weight:bold;font-style:italic;padding:0;margin:15px 0 5px}dl dt:first-child{padding:0}dl dt>:first-child{margin-top:0}dl dt>:last-child{margin-bottom:0}dl dd{margin:0 0 15px;padding:0 15px}dl dd>:first-child{margin-top:0}dl dd>:last-child{margin-bottom:0}blockquote{border-left:4px solid #DDD;padding:0 15px;color:#777}blockquote>:first-child{margin-top:0}blockquote>:last-child{margin-bottom:0}table{border-collapse:collapse;border-spacing:0;font-size:100%;font:inherit}table th{font-weight:bold;border:1px solid #ccc;padding:6px 13px}table td{border:1px solid #ccc;padding:6px 13px}table tr{border-top:1px solid #ccc;background-color:#fff}table tr:nth-child(2n){background-color:#f8f8f8}img{max-width:100%}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px;font-family:Consolas,'Liberation Mono',Courier,monospace;font-size:12px;color:#333}pre>code{margin:0;padding:0;white-space:pre;border:0;background:transparent}.highlight pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}pre code,pre tt{background-color:transparent;border:0}.poetry pre{font-family:Georgia,Garamond,serif!important;font-style:italic;font-size:110%!important;line-height:1.6em;display:block;margin-left:1em}.poetry pre code{font-family:Georgia,Garamond,serif!important;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;hyphens:auto;white-space:pre-wrap}sup,sub,a.footnote{font-size:1.4ex;height:0;line-height:1;vertical-align:super;position:relative}sub{vertical-align:sub;top:-1px}@media print{body{background:#fff}img,pre,blockquote,table,figure{page-break-inside:avoid}body{background:#fff;border:0}code{background-color:#fff;color:#333!important;padding:0 .2em;border:1px solid #dedede}pre{background:#fff}pre code{background-color:white!important;overflow:visible}}@media screen{body.inverted{color:#eee!important;border-color:#555;box-shadow:none}.inverted body,.inverted hr .inverted p,.inverted td,.inverted li,.inverted h1,.inverted h2,.inverted h3,.inverted h4,.inverted h5,.inverted h6,.inverted th,.inverted .math,.inverted caption,.inverted dd,.inverted dt,.inverted blockquote{color:#eee!important;border-color:#555;box-shadow:none}.inverted td,.inverted th{background:#333}.inverted h2{border-color:#555}.inverted hr{border-color:#777;border-width:1px!important}::selection{background:rgba(157,193,200,0.5)}h1::selection{background-color:rgba(45,156,208,0.3)}h2::selection{background-color:rgba(90,182,224,0.3)}h3::selection,h4::selection,h5::selection,h6::selection,li::selection,ol::selection{background-color:rgba(133,201,232,0.3)}code::selection{background-color:rgba(0,0,0,0.7);color:#eee}code span::selection{background-color:rgba(0,0,0,0.7)!important;color:#eee!important}a::selection{background-color:rgba(255,230,102,0.2)}.inverted a::selection{background-color:rgba(255,230,102,0.6)}td::selection,th::selection,caption::selection{background-color:rgba(180,237,95,0.5)}.inverted{background:#0b2531;background:#252a2a}.inverted body{background:#252a2a}.inverted a{color:#acd1d5}}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k,.highlight .o{font-weight:bold}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:bold}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:bold;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#800080;font-weight:bold}.highlight .gt{color:#a00}.highlight .kc,.highlight .kd,.highlight .kn,.highlight .kp,.highlight .kr{font-weight:bold}.highlight .kt{color:#458;font-weight:bold}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .na{color:#008080}.highlight .nb{color:#0086b3}.highlight .nc{color:#458;font-weight:bold}.highlight .no{color:#008080}.highlight .ni{color:#800080}.highlight .ne,.highlight .nf{color:#900;font-weight:bold}.highlight .nn{color:#555}.highlight .nt{color:#000080}.highlight .nv{color:#008080}.highlight .ow{font-weight:bold}.highlight .w{color:#bbb}.highlight .mf,.highlight .mh,.highlight .mi,.highlight .mo{color:#099}.highlight .sb,.highlight .sc,.highlight .sd,.highlight .s2,.highlight .se,.highlight .sh,.highlight .si,.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc,.highlight .vg,.highlight .vi{color:#008080}.highlight .il{color:#099}.highlight .gc{color:#999;background-color:#eaf2f5}.type-csharp .highlight .k,.type-csharp .highlight .kt{color:#00F}.type-csharp .highlight .nf{color:#000;font-weight:normal}.type-csharp .highlight .nc{color:#2b91af}.type-csharp .highlight .nn{color:#000}.type-csharp .highlight .s,.type-csharp .highlight .sc{color:#a31515}

</style>
<header id="title-block-header">
<h1 class="title">Analysing Twitter for Ubisoft</h1>
</header>
<div class="SETUP drawer">

</div>
<div class="HTML drawer">

</div>
<div class="R drawer">

</div>
<div class="SLOWDOWN drawer">

</div>
<div class="LATEX drawer">

</div>
<h1 id="analysing-the-relationship-between-friends-and-followers-for-twitter-users">8.1 Analysing the Relationship Between Friends and Followers for Twitter Users</h1>
<h2 id="retrieve-the-posts-from-twitter">8.1.1 Retrieve the posts from Twitter</h2>
<p>relevant posts can be retrieved from twitter by utilising the <code>rtweet</code> package, packages can be loaded for use in <strong><strong><span class="underline">R</span></strong></strong> thusly:</p>
<div>
<span class="label">Load the Packages for <strong><strong><em>R</em></strong></strong></span>
<div class="sourceCode" id="lpac" data-org-language="R" data-output="none" data-results="none"><pre class="sourceCode r"><code class="sourceCode r"><span id="lpac-1"><a href="#lpac-1"></a><span class="co"># Load Packages -----------------------------------------------------------</span></span>
<span id="lpac-2"><a href="#lpac-2"></a><span class="kw">setwd</span>(<span class="st">&quot;~/Dropbox/Notes/DataSci/Social_Web_Analytics/SWA-Project/scripts/&quot;</span>)</span>
<span id="lpac-3"><a href="#lpac-3"></a></span>
<span id="lpac-4"><a href="#lpac-4"></a><span class="cf">if</span> (<span class="kw">require</span>(<span class="st">&quot;pacman&quot;</span>)) {</span>
<span id="lpac-5"><a href="#lpac-5"></a>  <span class="kw">library</span>(pacman)</span>
<span id="lpac-6"><a href="#lpac-6"></a>} <span class="cf">else</span>{</span>
<span id="lpac-7"><a href="#lpac-7"></a>  <span class="kw">install.packages</span>(<span class="st">&quot;pacman&quot;</span>)</span>
<span id="lpac-8"><a href="#lpac-8"></a>  <span class="kw">library</span>(pacman)</span>
<span id="lpac-9"><a href="#lpac-9"></a>}</span>
<span id="lpac-10"><a href="#lpac-10"></a></span>
<span id="lpac-11"><a href="#lpac-11"></a>pacman<span class="op">::</span><span class="kw">p_load</span>(xts, sp, gstat, ggplot2, rmarkdown, reshape2,</span>
<span id="lpac-12"><a href="#lpac-12"></a>               ggmap, parallel, dplyr, plotly, tidyverse,</span>
<span id="lpac-13"><a href="#lpac-13"></a>               reticulate, UsingR, Rmpfr, swirl, corrplot,</span>
<span id="lpac-14"><a href="#lpac-14"></a>               gridExtra, mise, latex2exp, tree, rpart,</span>
<span id="lpac-15"><a href="#lpac-15"></a>               lattice, coin, primes, epitools, maps, clipr,</span>
<span id="lpac-16"><a href="#lpac-16"></a>               ggmap, twitteR, ROAuth, tm, rtweet, base64enc,</span>
<span id="lpac-17"><a href="#lpac-17"></a>               httpuv, SnowballC, RColorBrewer, wordcloud,</span>
<span id="lpac-18"><a href="#lpac-18"></a>               ggwordcloud, tidyverse, boot)</span></code></pre></div>
</div>
<p>The <code>rtweet</code> API will search for tweets that contain all the words of a query regardless of uppercase or lowercase usage <span class="citation" data-cites="kearney2019">cite:kearney2019</span>.</p>
<p>In order to leverage the <em>Twitter</em> API it is necessary to use tokens provided through a <em>Twitter</em> developer account:</p>
<div>
<span class="label">Import the twitter tokens (redacted)</span>
<div class="sourceCode" id="tkn" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="tkn-1"><a href="#tkn-1"></a><span class="co"># Set up Tokens ===========================================================</span></span>
<span id="tkn-2"><a href="#tkn-2"></a></span>
<span id="tkn-3"><a href="#tkn-3"></a><span class="kw">options</span>(<span class="dt">RCurlOptions =</span> <span class="kw">list</span>(</span>
<span id="tkn-4"><a href="#tkn-4"></a>  <span class="dt">verbose =</span> <span class="ot">FALSE</span>,</span>
<span id="tkn-5"><a href="#tkn-5"></a>  <span class="dt">capath =</span> <span class="kw">system.file</span>(<span class="st">&quot;CurlSSL&quot;</span>, <span class="st">&quot;cacert.pem&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;RCurl&quot;</span>),</span>
<span id="tkn-6"><a href="#tkn-6"></a>  <span class="dt">ssl.verifypeer =</span> <span class="ot">FALSE</span></span>
<span id="tkn-7"><a href="#tkn-7"></a>))</span>
<span id="tkn-8"><a href="#tkn-8"></a></span>
<span id="tkn-9"><a href="#tkn-9"></a><span class="kw">setup_twitter_oauth</span>(</span>
<span id="tkn-10"><a href="#tkn-10"></a>  <span class="dt">consumer_key =</span> <span class="st">&quot;*************************&quot;</span>,</span>
<span id="tkn-11"><a href="#tkn-11"></a>  <span class="dt">consumer_secret =</span> <span class="st">&quot;**************************************************&quot;</span>,</span>
<span id="tkn-12"><a href="#tkn-12"></a>  <span class="dt">access_token =</span> <span class="st">&quot;**************************************************&quot;</span>,</span>
<span id="tkn-13"><a href="#tkn-13"></a>  <span class="dt">access_secret =</span> <span class="st">&quot;*********************************************&quot;</span></span>
<span id="tkn-14"><a href="#tkn-14"></a>)</span>
<span id="tkn-15"><a href="#tkn-15"></a></span>
<span id="tkn-16"><a href="#tkn-16"></a><span class="co"># rtweet ==================================================================</span></span>
<span id="tkn-17"><a href="#tkn-17"></a>tk &lt;-<span class="st">    </span>rtweet<span class="op">::</span><span class="kw">create_token</span>(</span>
<span id="tkn-18"><a href="#tkn-18"></a>  <span class="dt">app =</span> <span class="st">&quot;SWA&quot;</span>,</span>
<span id="tkn-19"><a href="#tkn-19"></a>  <span class="dt">consumer_key    =</span> <span class="st">&quot;*************************&quot;</span>,</span>
<span id="tkn-20"><a href="#tkn-20"></a>  <span class="dt">consumer_secret =</span> <span class="st">&quot;**************************************************&quot;</span>,</span>
<span id="tkn-21"><a href="#tkn-21"></a>  <span class="dt">access_token    =</span> <span class="st">&quot;**************************************************&quot;</span>,</span>
<span id="tkn-22"><a href="#tkn-22"></a>  <span class="dt">access_secret   =</span> <span class="st">&quot;*********************************************&quot;</span>,</span>
<span id="tkn-23"><a href="#tkn-23"></a>  <span class="dt">set_renv        =</span> <span class="ot">FALSE</span></span></code></pre></div>
</div>
<p>and hence all tweets containing a mention of <em>Ubisoft</em> can be returned and saved to disk as shown in listing <em>save</em>:</p>
<div>
<span class="label">Save the Tweets to the HDD as an <code>rdata</code> file</span>
<div class="sourceCode" id="save" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="save-1"><a href="#save-1"></a>n &lt;-<span class="st"> </span><span class="dv">1000</span></span>
<span id="save-2"><a href="#save-2"></a>tweets.company &lt;-<span class="st"> </span><span class="kw">search_tweets</span>(<span class="dt">q =</span> <span class="st">&#39;ubisoft&#39;</span>, <span class="dt">n =</span> n, <span class="dt">token =</span> tk,</span>
<span id="save-3"><a href="#save-3"></a>                                <span class="dt">include_rts =</span> <span class="ot">FALSE</span>)</span>
<span id="save-4"><a href="#save-4"></a><span class="kw">save</span>(tweets.company[,], <span class="dt">file =</span> <span class="st">&quot;resources/Download_1.Rdata&quot;</span>)</span></code></pre></div>
</div>
<h2 id="count-of-followers-and-friends">8.2.2 Count of Followers and Friends</h2>
<p>In order to identify the number of users that are contained in the <em>tweets</em> the <code>unique()</code> function can be used to return a vector of names which can then be passed as an index to the vector of counts as shown in listing <em>count</em>, this provides that 81.7% of the tweets are by unique users.</p>
<div>
<span class="label">Return follower count of twitter posts</span>
<div class="sourceCode" id="count" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="count-1"><a href="#count-1"></a>(users &lt;-<span class="st"> </span><span class="kw">unique</span>(tweets.company<span class="op">$</span>name)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">length</span>()</span>
<span id="count-2"><a href="#count-2"></a>x &lt;-<span class="st"> </span>tweets.company<span class="op">$</span>followers_count[<span class="kw">duplicated</span>(tweets.company<span class="op">$</span>name)]</span>
<span id="count-3"><a href="#count-3"></a>y &lt;-<span class="st"> </span>tweets.company<span class="op">$</span>friends_count[<span class="kw">duplicated</span>(tweets.company<span class="op">$</span>name)]</span>
<span id="count-4"><a href="#count-4"></a></span>
<span id="count-5"><a href="#count-5"></a><span class="co">## &gt; [1] 817</span></span></code></pre></div>
</div>
<h2 id="summary-statistics">8.1.3 Summary Statistics</h2>
<p>The average number of friends and followers from users who posted tweets mentioning <em>Ubisoft</em> can be returned using the <code>mean()</code> as shown in listing <em>mean</em> this provides that on average each user has 586 friends and 63,620 followers.</p>
<div>
<span class="label">Determine the average number of friends and followers</span>
<div class="sourceCode" id="mean" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="mean-1"><a href="#mean-1"></a>x&lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">090</span>)</span>
<span id="mean-2"><a href="#mean-2"></a>y&lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">090</span>)</span>
<span id="mean-3"><a href="#mean-3"></a>(xbar &lt;-<span class="st"> </span><span class="kw">mean</span>(x))</span>
<span id="mean-4"><a href="#mean-4"></a>(ybar &lt;-<span class="st"> </span><span class="kw">mean</span>(y))</span>
<span id="mean-5"><a href="#mean-5"></a></span>
<span id="mean-6"><a href="#mean-6"></a><span class="co">## &gt; [1] 4295.195</span></span>
<span id="mean-7"><a href="#mean-7"></a><span class="co">## &gt; [1] 435.9449</span></span></code></pre></div>
</div>
<h2 id="above-average-followers">8.1.4 Above Average Followers</h2>
<p>Each user can be compared to the average number of followers, by using a logical operator on the vector (e.g. <code>y &gt; ybar</code>), this will return an output of logical values. <strong><em>R</em></strong> will coerce logicals into 1/0 values meaning that the mean value will return the proportion of <code>TRUE</code> responses as shown in listing <em>pyhat</em>. This provides that:</p>
<ul>
<li>2.4% of the have identified have an above average <strong>number of followers</strong>.</li>
<li>20.6% of the users identified have an above average <strong>number of friends</strong>.</li>
</ul>
<div>
<span class="label">Calculate the proportion of users with above average follower counts</span>
<div class="sourceCode" id="pyhat" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="pyhat-1"><a href="#pyhat-1"></a>(px_hat &lt;-<span class="st"> </span><span class="kw">mean</span>(x<span class="op">&gt;</span>xbar))</span>
<span id="pyhat-2"><a href="#pyhat-2"></a>(py_hat &lt;-<span class="st"> </span><span class="kw">mean</span>(y<span class="op">&gt;</span>ybar))</span>
<span id="pyhat-3"><a href="#pyhat-3"></a></span>
<span id="pyhat-4"><a href="#pyhat-4"></a><span class="co">## &gt; [1] 0.0244798</span></span>
<span id="pyhat-5"><a href="#pyhat-5"></a><span class="co">## &gt; [1] 0.2729498</span></span></code></pre></div>
</div>
<h2 id="bootstrap-confidence-intervals">8.1.5 Bootstrap confidence intervals</h2>
<h3 id="ab.-generate-a-bootsrap-distribution">a/b.) Generate a bootsrap distribution</h3>
<p>A bootstrap assumes that the population is an infinitely large repetition of the sample and may be produces with respect to follower counts by resampling with replacement/repetition and plotted using the <code>ggplot2</code> library as deomonstrated in listings <em>btpop</em> and <em>btgg</em> and shown in figure <em>btpopfg</em>.</p>
<p>This shows that the population follower counts is a non-normal skew-right distribution, which is expected because the number of friends is an integer value bound by zero <span class="citation" data-cites="nist2013">cite:nist2013</span>.</p>
<div>
<span class="label">Bootstrapping a population from the sample.</span>
<div class="sourceCode" id="btpop" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="btpop-1"><a href="#btpop-1"></a><span class="co">## Resample the Data</span></span>
<span id="btpop-2"><a href="#btpop-2"></a>(bt_pop &lt;-<span class="st"> </span><span class="kw">sample</span>(x, <span class="dt">size =</span> <span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</span>
<span id="btpop-3"><a href="#btpop-3"></a></span>
<span id="btpop-4"><a href="#btpop-4"></a><span class="co">## &gt; [1]   7 515 262 309 186 166</span></span></code></pre></div>
</div>
<div>
<span class="label"></span>
<div class="sourceCode" id="btgg"><pre class="sourceCode r"><code class="sourceCode r"><span id="btgg-1"><a href="#btgg-1"></a><span class="co">## Make the Population</span></span>
<span id="btgg-2"><a href="#btgg-2"></a>bt_pop_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(<span class="st">&quot;Followers&quot;</span> =<span class="st"> </span>bt_pop)</span>
<span id="btgg-3"><a href="#btgg-3"></a><span class="kw">ggplot</span>(<span class="dt">data =</span> bt_pop_data, <span class="kw">aes</span>(<span class="dt">x =</span> Followers)) <span class="op">+</span></span>
<span id="btgg-4"><a href="#btgg-4"></a><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">y =</span> ..density..), <span class="dt">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="dt">bins =</span> <span class="dv">35</span>, <span class="dt">col =</span> <span class="st">&quot;pink&quot;</span>) <span class="op">+</span></span>
<span id="btgg-5"><a href="#btgg-5"></a><span class="st">  </span><span class="kw">geom_density</span>(<span class="dt">col =</span> <span class="st">&quot;violetred2&quot;</span>) <span class="op">+</span></span>
<span id="btgg-6"><a href="#btgg-6"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">800</span>)) <span class="op">+</span></span>
<span id="btgg-7"><a href="#btgg-7"></a><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="btgg-8"><a href="#btgg-8"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Number of Followers&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Density&quot;</span>,</span>
<span id="btgg-9"><a href="#btgg-9"></a>       <span class="dt">title =</span> <span class="st">&quot;Bootstrapped population of Follower Numbers&quot;</span>)</span>
<span id="btgg-10"><a href="#btgg-10"></a></span></code></pre></div>
</div>
<figure>
<img src="./Figures/BootStrap_Pop.png" title="btpopfg" alt="" /><figcaption>Histogram of the bootrapped population of follower counts</figcaption>
</figure>
<h3 id="c.-estimate-a-confidence-interval-for-the-population-mean-follower-counts">c.) Estimate a Confidence Interval for the population mean Follower Counts</h3>
<p>In order to perform a bootrap for the population mean value of follower counts it is necessary to:</p>
<ol>
<li>Resample the data with replacement
<ul>
<li>i.e. randomly select values from the sample allowing for repetition</li>
</ul></li>
<li>Measure the statistic of concern</li>
<li>Replicate this a sufficient number of times
<ul>
<li>i.e. Greater than or equal to 1000 times <a href="cite:davison1997">Ch. 5</a></li>
</ul></li>
</ol>
<p>This is equivalent to drawing a sample from a population that is infinitely large and constructed of repetitions of the sample. This can be performed in <strong><em>R</em></strong> as shown in listing <em>bt1s</em>.</p>
<div>
<span class="label">Confidence Interval of Mean Follower Count in Population</span>
<div class="sourceCode" id="bt1s" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="bt1s-1"><a href="#bt1s-1"></a>xbar_boot_loop &lt;-<span class="st"> </span><span class="kw">replicate</span>(<span class="dv">10</span><span class="op">^</span><span class="dv">3</span>, {</span>
<span id="bt1s-2"><a href="#bt1s-2"></a>  s &lt;-<span class="st"> </span><span class="kw">sample</span>(x, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="bt1s-3"><a href="#bt1s-3"></a>  <span class="kw">mean</span>(s)</span>
<span id="bt1s-4"><a href="#bt1s-4"></a>  })</span>
<span id="bt1s-5"><a href="#bt1s-5"></a><span class="kw">quantile</span>(xbar_boot_loop, <span class="kw">c</span>((<span class="dv">1</span><span class="fl">-0.97</span>)<span class="op">/</span><span class="dv">2</span>, (<span class="dv">1</span><span class="fl">+0.97</span>)<span class="op">/</span><span class="dv">2</span>))</span>
<span id="bt1s-6"><a href="#bt1s-6"></a></span>
<span id="bt1s-7"><a href="#bt1s-7"></a><span class="co">##       1.5%      98.5%</span></span>
<span id="bt1s-8"><a href="#bt1s-8"></a><span class="co">##   588.4189 10228.7352</span></span></code></pre></div>
</div>
<p>A 97% probability interval is such that a sample drawn from a population will contain the population mean in that interval 97% of the time, this means that it may be concluded with a high degree of certainty that the true population mean lies between 588 and 10228.</p>
<ol>
<li><p>Alternative Approaches</p>
<p>If this data was normally distributed it may have been appropriate to consider bootstrapping the standard error and using a <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> distribution, however it is more appropriate to use a percentile interval for skewed data such as this, in saying that however this method is not considered to be very accurate in the literature and is often too narrow. <a href="cite:hesterberg2015">Section 4.1</a></p>
<ul>
<li><p>It's worth noting that the normal <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> value bootstrap offers no advantage over using a <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> distribution (other than being illustrative of bootstrapping generally) <a href="cite:hesterberg2015">Section 4.1</a></p>
<p>The <code>boot</code> package is a bootstrapping library common among authors in the data science sphere <a href="cite:james2013">p. 295</a> <a href="cite:wiley2019">p. 237</a> that implements confidence intervals consistent with work by Davison and Hinkley <span class="citation" data-cites="ripley2020">cite:ripley2020</span> in there texbook <em>Bootstrap Methods and their Application</em>. In this work it is provided that the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><msub><mi>C</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">BC_{a}</annotation></semantics></math> method of constructing confidence intervals is superior to mere percentile methods in terms of accuracy <a href="cite:davison1997">Ch. 5</a>, a sentiment echoed in the literature. <a href="cite:carpenter2000,davison1997">Ch. 5</a></p>
<p>Such methods can be implemented in <strong><em>R</em></strong> by passing a function to the the <code>boot</code> call as shown in listing <em>bootx</em>. This provides a broader interval, providing that the true confidence interval could lie between 1079 and 16227 followers.</p>
<p>#+begin<sub>src</sub> r</p></li>
</ul>
<p>xbar<sub>boot</sub> &lt;- boot(data = x, statistic = mean<sub>val</sub>, R = 10<sup>3</sup>) boot.ci(xbar<sub>boot</sub>, conf = 0.97, type = "bca", index = 1)</p>
<p>## BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS ## Based on 1000 bootstrap replicates ## ## CALL : ## boot.ci(boot.out = xbar<sub>boot</sub>, conf = 0.97, type = "bca", index = 1) ## ## Intervals : ## Level BCa ## 97% ( 1079, 16227 ) ## Calculations and Intervals on Original Scale ## Warning : BCa Intervals used Extreme Quantiles ## Some BCa intervals may be unstable ## Warning message: ## In norm.inter(t, adj.alpha) : extreme order statistics used as endpoints</p>
<p>#+end<sub>src</sub></p>
<p>&lt;&lt;bibliography link&gt;&gt; bibliography:./references.bib</p>
<p>&lt;&lt;bibliographystyle link&gt;&gt; bibliographystyle:unsrt</p></li>
</ol>
<h3 id="d.-estimate-a-confidence-interval-for-the-population-mean-friend-counts">d.) Estimate a Confidence Interval for the population mean Friend Counts</h3>
<p>A Confidence interval for the population mean friend counts may be constructed in a like wise fashion as shown in listings <em>booty</em>. This provides that the 97% confidence interval for the population mean friend count is between 384 and 502 (or 387 and 496 if the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><msub><mi>C</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">BC_{a}</annotation></semantics></math> method used, they're quite close and so the more conservative percentile method will be accepted).</p>
<div>
<span class="label">Bootstrap of population mean follower count</span>
<div class="sourceCode" id="booty" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="booty-1"><a href="#booty-1"></a><span class="co"># d.) Estimate a Confidence Interval for the populattion mean Friend Count ===</span></span>
<span id="booty-2"><a href="#booty-2"></a><span class="co"># Using a Percentile Method #####################################################</span></span>
<span id="booty-3"><a href="#booty-3"></a>ybar_boot_loop &lt;-<span class="st"> </span><span class="kw">replicate</span>(<span class="dv">10</span><span class="op">^</span><span class="dv">3</span>, {</span>
<span id="booty-4"><a href="#booty-4"></a>  s &lt;-<span class="st"> </span><span class="kw">sample</span>(y, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="booty-5"><a href="#booty-5"></a>  <span class="kw">mean</span>(s)</span>
<span id="booty-6"><a href="#booty-6"></a>  })</span>
<span id="booty-7"><a href="#booty-7"></a><span class="kw">quantile</span>(ybar_boot_loop, <span class="kw">c</span>(<span class="fl">0.015</span>, <span class="fl">0.985</span>)</span>
<span id="booty-8"><a href="#booty-8"></a></span>
<span id="booty-9"><a href="#booty-9"></a><span class="co"># Using BCA Method #############################################################</span></span>
<span id="booty-10"><a href="#booty-10"></a>mean_val &lt;-<span class="st"> </span><span class="cf">function</span>(data, index) {</span>
<span id="booty-11"><a href="#booty-11"></a>  X =<span class="st"> </span>data[index]</span>
<span id="booty-12"><a href="#booty-12"></a>  <span class="kw">return</span>(<span class="kw">mean</span>(X))</span>
<span id="booty-13"><a href="#booty-13"></a>}</span>
<span id="booty-14"><a href="#booty-14"></a></span>
<span id="booty-15"><a href="#booty-15"></a>xbar_boot &lt;-<span class="st"> </span><span class="kw">boot</span>(<span class="dt">data =</span> y, <span class="dt">statistic =</span> mean_val, <span class="dt">R =</span> <span class="dv">10</span><span class="op">^</span><span class="dv">3</span>)</span>
<span id="booty-16"><a href="#booty-16"></a><span class="kw">boot.ci</span>(xbar_boot, <span class="dt">conf =</span> <span class="fl">0.97</span>, <span class="dt">type =</span> <span class="st">&quot;bca&quot;</span>, <span class="dt">index =</span> <span class="dv">1</span>)</span>
<span id="booty-17"><a href="#booty-17"></a></span>
<span id="booty-18"><a href="#booty-18"></a></span>
<span id="booty-19"><a href="#booty-19"></a><span class="co">##     1.5%    98.5%</span></span>
<span id="booty-20"><a href="#booty-20"></a><span class="co">## 383.7619 501.5903</span></span>
<span id="booty-21"><a href="#booty-21"></a><span class="co">##</span></span>
<span id="booty-22"><a href="#booty-22"></a><span class="co">## BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS</span></span>
<span id="booty-23"><a href="#booty-23"></a><span class="co">## Based on 1000 bootstrap replicates</span></span>
<span id="booty-24"><a href="#booty-24"></a><span class="co">##</span></span>
<span id="booty-25"><a href="#booty-25"></a><span class="co">## CALL :</span></span>
<span id="booty-26"><a href="#booty-26"></a><span class="co">## boot.ci(boot.out = xbar_boot, conf = 0.97, type = &quot;bca&quot;, index = 1)</span></span>
<span id="booty-27"><a href="#booty-27"></a><span class="co">##</span></span>
<span id="booty-28"><a href="#booty-28"></a><span class="co">## Intervals :</span></span>
<span id="booty-29"><a href="#booty-29"></a><span class="co">## Level       BCa</span></span>
<span id="booty-30"><a href="#booty-30"></a><span class="co">## 97%   (386.8, 496.7 )</span></span>
<span id="booty-31"><a href="#booty-31"></a><span class="co">## Calculations and Intervals on Original Scale</span></span>
<span id="booty-32"><a href="#booty-32"></a><span class="co">## Some BCa intervals may be unstable</span></span></code></pre></div>
</div>
<h2 id="estimate-a-97-confidence-interval-for-the-high-friend-count-proportion" dir="/home/ryan/Dropbox/Notes/DataSci/Social_Web_Analytics/SWA-Project/docs/"><span class="todo FIXME">FIXME</span> 8.1.6 Estimate a 97% Confidence Interval for the High Friend Count Proportion</h2>
<p>In order to bootstrap a confidence interval for the proportion of users with above average follower counts, repeteadly draw random samples from an infinitely large population composed entirely of the sample, and record the sampled proportion. this can be acheived by resampling the observations of above and below as shown in listing <em>phat</em>.</p>
<p>This provides that:</p>
<ul>
<li>The 97% confidence interval for the population proportion of users that have an above average number of friends is between 0.24 and 0.31.
<ul>
<li>i.e. The probability of any given sample containing the population mean within this interval would be 97%, although that doesn't however mean that there is a 97% probability that this interval contains the value, merely that we may be 97% <em>confident</em></li>
</ul></li>
</ul>
<div>
<span class="label">Bootstrap of Proportion of Friends above average</span>
<div class="sourceCode" id="phat" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="phat-1"><a href="#phat-1"></a><span class="co"># 8.1.6 High Friend Count Proportion -------------------------------------------</span></span>
<span id="phat-2"><a href="#phat-2"></a>prop &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;Below&quot;</span>, <span class="st">&quot;Above&quot;</span>))</span>
<span id="phat-3"><a href="#phat-3"></a><span class="co">## 1 is above average, 2 is below</span></span>
<span id="phat-4"><a href="#phat-4"></a>py_hat_bt &lt;-<span class="st"> </span><span class="kw">replicate</span>(<span class="dv">10</span><span class="op">^</span><span class="dv">3</span>, {</span>
<span id="phat-5"><a href="#phat-5"></a>  rs      &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;Below&quot;</span>, <span class="st">&quot;Above&quot;</span>),</span>
<span id="phat-6"><a href="#phat-6"></a>                    <span class="dt">size =</span> <span class="kw">length</span>(y),</span>
<span id="phat-7"><a href="#phat-7"></a>                    <span class="dt">prob =</span> <span class="kw">c</span>(py_hat, <span class="dv">1</span><span class="op">-</span>py_hat),</span>
<span id="phat-8"><a href="#phat-8"></a>                    <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="phat-9"><a href="#phat-9"></a>isabove &lt;-<span class="st"> </span>rs <span class="op">==</span><span class="st"> &quot;Above&quot;</span></span>
<span id="phat-10"><a href="#phat-10"></a><span class="kw">mean</span>(isabove)</span>
<span id="phat-11"><a href="#phat-11"></a>})</span>
<span id="phat-12"><a href="#phat-12"></a><span class="kw">quantile</span>(py_hat_bt, <span class="kw">c</span>(<span class="fl">0.015</span>, <span class="fl">0.985</span>))</span>
<span id="phat-13"><a href="#phat-13"></a></span>
<span id="phat-14"><a href="#phat-14"></a></span>
<span id="phat-15"><a href="#phat-15"></a><span class="co">##      1.5%     98.5%</span></span>
<span id="phat-16"><a href="#phat-16"></a><span class="co">## 0.2399021 0.3072215</span></span>
<span id="phat-17"><a href="#phat-17"></a><span class="co">## &gt; &gt; &gt; . + &gt; &gt; &gt;</span></span>
<span id="phat-18"><a href="#phat-18"></a><span class="co">## BOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS</span></span>
<span id="phat-19"><a href="#phat-19"></a><span class="co">## Based on 1000 bootstrap replicates</span></span>
<span id="phat-20"><a href="#phat-20"></a><span class="co">##</span></span>
<span id="phat-21"><a href="#phat-21"></a><span class="co">## CALL :</span></span>
<span id="phat-22"><a href="#phat-22"></a><span class="co">## boot.ci(boot.out = py_hat_boot, conf = 0.97, type = &quot;bca&quot;)</span></span>
<span id="phat-23"><a href="#phat-23"></a><span class="co">##</span></span>
<span id="phat-24"><a href="#phat-24"></a><span class="co">## Intervals :</span></span>
<span id="phat-25"><a href="#phat-25"></a><span class="co">## Level       BCa</span></span>
<span id="phat-26"><a href="#phat-26"></a><span class="co">## 97%   ( 0.2399,  0.3072 )</span></span>
<span id="phat-27"><a href="#phat-27"></a><span class="co">## Calculations and Intervals on Original Scale</span></span></code></pre></div>
</div>
<h2 id="is-the-number-of-friends-independent-to-the-number-of-followers">8.1.7 Is the Number of Friends Independent to the Number of Followers</h2>
<p>One method to determine whether or not the number of followers is independent of the number of friends is to bin the counts and determine whether or not the distribution of users across those counts is consistent with the hypothesis of independence.</p>
<h3 id="bin-the-follower-and-friend-categories">Bin the Follower and Friend Categories</h3>
<p>The counts may be binned by performing a logical interval test as shown in listing <em>7bin</em>.</p>
<div>
<span class="label">Use Logical Test to Assign observations into bins</span>
<div class="sourceCode" id="7bin" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="7bin-1"><a href="#7bin-1"></a><span class="co">## Assign Categories</span></span>
<span id="7bin-2"><a href="#7bin-2"></a>x_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(x)</span>
<span id="7bin-3"><a href="#7bin-3"></a>x_df<span class="op">$</span>cat[<span class="dv">0</span>       <span class="op">&lt;=</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&amp;</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">100</span>] &lt;-<span class="st"> &quot;Tens&quot;</span></span>
<span id="7bin-4"><a href="#7bin-4"></a>x_df<span class="op">$</span>cat[<span class="dv">100</span>     <span class="op">&lt;=</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&amp;</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">1000</span>] &lt;-<span class="st"> &quot;Hundreds&quot;</span></span>
<span id="7bin-5"><a href="#7bin-5"></a>x_df<span class="op">$</span>cat[<span class="dv">1000</span>    <span class="op">&lt;=</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&amp;</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">2000</span>] &lt;-<span class="st"> &quot;1Thousands&quot;</span></span>
<span id="7bin-6"><a href="#7bin-6"></a>x_df<span class="op">$</span>cat[<span class="dv">2000</span>    <span class="op">&lt;=</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&amp;</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">3000</span>] &lt;-<span class="st"> &quot;2Thousands&quot;</span></span>
<span id="7bin-7"><a href="#7bin-7"></a>x_df<span class="op">$</span>cat[<span class="dv">3000</span>    <span class="op">&lt;=</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&amp;</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">4000</span>] &lt;-<span class="st"> &quot;3Thousands&quot;</span></span>
<span id="7bin-8"><a href="#7bin-8"></a>x_df<span class="op">$</span>cat[<span class="dv">4000</span>    <span class="op">&lt;=</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&amp;</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&lt;</span><span class="st"> </span><span class="dv">5000</span>] &lt;-<span class="st"> &quot;4Thousands&quot;</span></span>
<span id="7bin-9"><a href="#7bin-9"></a>x_df<span class="op">$</span>cat[<span class="dv">5000</span>    <span class="op">&lt;=</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&amp;</span><span class="st"> </span>x_df<span class="op">$</span>x <span class="op">&lt;</span><span class="st"> </span><span class="ot">Inf</span>] &lt;-<span class="st"> &quot;5ThousandOrMore&quot;</span></span>
<span id="7bin-10"><a href="#7bin-10"></a></span>
<span id="7bin-11"><a href="#7bin-11"></a><span class="co">### Make a factor</span></span>
<span id="7bin-12"><a href="#7bin-12"></a>x_df<span class="op">$</span>cat &lt;-<span class="st"> </span><span class="kw">factor</span>(x_df<span class="op">$</span>cat, <span class="dt">levels =</span> var_levels, <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</span>
<span id="7bin-13"><a href="#7bin-13"></a></span>
<span id="7bin-14"><a href="#7bin-14"></a><span class="co">### Determine Frequencies</span></span>
<span id="7bin-15"><a href="#7bin-15"></a>(x_freq &lt;-<span class="st"> </span><span class="kw">table</span>(x_df<span class="op">$</span>cat) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.matrix</span>())</span>
<span id="7bin-16"><a href="#7bin-16"></a></span>
<span id="7bin-17"><a href="#7bin-17"></a><span class="co">## ** b) Find the Friend Count Frequency ===========================================</span></span>
<span id="7bin-18"><a href="#7bin-18"></a><span class="co">## Assign Categories</span></span>
<span id="7bin-19"><a href="#7bin-19"></a>y_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(y)</span>
<span id="7bin-20"><a href="#7bin-20"></a>y_df<span class="op">$</span>cat[<span class="dv">0</span>       <span class="op">&lt;=</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&amp;</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">100</span>] &lt;-<span class="st"> &quot;Tens&quot;</span></span>
<span id="7bin-21"><a href="#7bin-21"></a>y_df<span class="op">$</span>cat[<span class="dv">100</span>     <span class="op">&lt;=</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&amp;</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">1000</span>] &lt;-<span class="st"> &quot;Hundreds&quot;</span></span>
<span id="7bin-22"><a href="#7bin-22"></a>y_df<span class="op">$</span>cat[<span class="dv">1000</span>    <span class="op">&lt;=</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&amp;</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">2000</span>] &lt;-<span class="st"> &quot;1Thousands&quot;</span></span>
<span id="7bin-23"><a href="#7bin-23"></a>y_df<span class="op">$</span>cat[<span class="dv">2000</span>    <span class="op">&lt;=</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&amp;</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">3000</span>] &lt;-<span class="st"> &quot;2Thousands&quot;</span></span>
<span id="7bin-24"><a href="#7bin-24"></a>y_df<span class="op">$</span>cat[<span class="dv">3000</span>    <span class="op">&lt;=</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&amp;</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">4000</span>] &lt;-<span class="st"> &quot;3Thousands&quot;</span></span>
<span id="7bin-25"><a href="#7bin-25"></a>y_df<span class="op">$</span>cat[<span class="dv">4000</span>    <span class="op">&lt;=</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&amp;</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">5000</span>] &lt;-<span class="st"> &quot;4Thousands&quot;</span></span>
<span id="7bin-26"><a href="#7bin-26"></a>y_df<span class="op">$</span>cat[<span class="dv">5000</span>    <span class="op">&lt;=</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&amp;</span><span class="st"> </span>y_df<span class="op">$</span>y <span class="op">&lt;</span><span class="st"> </span><span class="ot">Inf</span>]  &lt;-<span class="st"> &quot;5ThousandOrMore&quot;</span></span>
<span id="7bin-27"><a href="#7bin-27"></a></span>
<span id="7bin-28"><a href="#7bin-28"></a><span class="co">### Make a factor</span></span>
<span id="7bin-29"><a href="#7bin-29"></a>y_df<span class="op">$</span>cat &lt;-<span class="st"> </span><span class="kw">factor</span>(y_df<span class="op">$</span>cat, <span class="dt">levels =</span> var_levels, <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</span>
<span id="7bin-30"><a href="#7bin-30"></a></span>
<span id="7bin-31"><a href="#7bin-31"></a><span class="co">### Determine Frequencies</span></span>
<span id="7bin-32"><a href="#7bin-32"></a>(y_freq &lt;-<span class="st"> </span><span class="kw">table</span>(y_df<span class="op">$</span>cat) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.matrix</span>())</span></code></pre></div>
</div>
<h3 id="find-the-group-frequency">Find the Group frequency</h3>
<p>These values may be tabluated in order to count the occurence of users among these categories as shown in listing <em>7fr</em> and table <em>7frt</em>.</p>
<div>
<span class="label">Tabulate the binned counts for the distribution of users among among amount and status.</span>
<div class="sourceCode" id="7fr" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="7fr-1"><a href="#7fr-1"></a>vals &lt;-<span class="st"> </span><span class="kw">t</span>(<span class="kw">cbind</span>(x_freq, y_freq))</span>
<span id="7fr-2"><a href="#7fr-2"></a><span class="kw">rownames</span>(vals) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Followers.x&quot;</span>, <span class="st">&quot;followers.y&quot;</span>)</span>
<span id="7fr-3"><a href="#7fr-3"></a>vals</span>
<span id="7fr-4"><a href="#7fr-4"></a></span>
<span id="7fr-5"><a href="#7fr-5"></a><span class="co">##             Tens Hundreds 1Thousands 2Thousands 3Thousands 4Thousands</span></span>
<span id="7fr-6"><a href="#7fr-6"></a><span class="co">## Followers.x  421      317         39         11          9          2</span></span>
<span id="7fr-7"><a href="#7fr-7"></a><span class="co">## followers.y  262      476         47         15          6          9</span></span>
<span id="7fr-8"><a href="#7fr-8"></a><span class="co">##             5ThousandOrMore</span></span>
<span id="7fr-9"><a href="#7fr-9"></a><span class="co">## Followers.x              18</span></span>
<span id="7fr-10"><a href="#7fr-10"></a><span class="co">## followers.y               2</span></span></code></pre></div>
</div>
<table>
<caption>Table of Binned Friend and Follower counts, transposed relative to code.</caption>
<tbody>
<tr class="odd">
<td></td>
<td><strong><strong><em>Followers</em></strong></strong></td>
<td><strong><strong><em>Friends</em></strong></strong></td>
</tr>
<tr class="even">
<td><em>Tens</em></td>
<td>421</td>
<td>262</td>
</tr>
<tr class="odd">
<td><em>Hundreds</em></td>
<td>317</td>
<td>476</td>
</tr>
<tr class="even">
<td><em>1 - Thousands</em></td>
<td>39</td>
<td>47</td>
</tr>
<tr class="odd">
<td><em>2 - Thousands</em></td>
<td>11</td>
<td>15</td>
</tr>
<tr class="even">
<td><em>3 - Thousands</em></td>
<td>9</td>
<td>6</td>
</tr>
<tr class="odd">
<td><em>4 - Thousands</em></td>
<td>2</td>
<td>9</td>
</tr>
<tr class="even">
<td><em>5 Thousand or More</em></td>
<td>18</td>
<td>2</td>
</tr>
</tbody>
</table>
<h3 id="find-the-expected-counts-under-each-group-and-test-for-independence">Find the Expected Counts under each group and test for independence</h3>
<p>The expected count of each cell, under the assumption that the two metrics are independent, will be the proportion users per bracket multiplied by the number of users in that status group. This implies that any cell will be:</p>
<ul>
<li>the product of the row sum, multiplied by the column sum divided by the number of counts.</li>
</ul>
<p>This can be equivalently expressed as an outer product as shown in equation <a href="eqref:eq:1">eqref:eq:1</a>, in <strong><em>R</em></strong> this operation is denoted by the <code>%o%</code> operator, which is shorthand for the <code>outer()</code> function, this and other summary statistics may be evaluated as shown in listing <em>smst</em>.</p>
<p>The outer product is such that:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathvariant="bold"><mi>𝐮</mi></mstyle><mo>⊗</mo><mstyle mathvariant="bold"><mi>𝐯</mi></mstyle><mo>=</mo><mstyle mathvariant="bold"><mi>𝐮</mi></mstyle><msup><mstyle mathvariant="bold"><mi>𝐯</mi></mstyle><mtext mathvariant="sans-serif">𝖳</mtext></msup><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center"><msub><mi>u</mi><mn>1</mn></msub></mtd></mtr><mtr><mtd columnalign="center"><msub><mi>u</mi><mn>2</mn></msub></mtd></mtr><mtr><mtd columnalign="center"><msub><mi>u</mi><mn>3</mn></msub></mtd></mtr><mtr><mtd columnalign="center"><msub><mi>u</mi><mn>4</mn></msub></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center"><msub><mi>v</mi><mn>1</mn></msub></mtd><mtd columnalign="center"><msub><mi>v</mi><mn>2</mn></msub></mtd><mtd columnalign="center"><msub><mi>v</mi><mn>3</mn></msub></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center"><msub><mi>u</mi><mn>1</mn></msub><msub><mi>v</mi><mn>1</mn></msub></mtd><mtd columnalign="center"><msub><mi>u</mi><mn>1</mn></msub><msub><mi>v</mi><mn>2</mn></msub></mtd><mtd columnalign="center"><msub><mi>u</mi><mn>1</mn></msub><msub><mi>v</mi><mn>3</mn></msub></mtd></mtr><mtr><mtd columnalign="center"><msub><mi>u</mi><mn>2</mn></msub><msub><mi>v</mi><mn>1</mn></msub></mtd><mtd columnalign="center"><msub><mi>u</mi><mn>2</mn></msub><msub><mi>v</mi><mn>2</mn></msub></mtd><mtd columnalign="center"><msub><mi>u</mi><mn>2</mn></msub><msub><mi>v</mi><mn>3</mn></msub></mtd></mtr><mtr><mtd columnalign="center"><msub><mi>u</mi><mn>3</mn></msub><msub><mi>v</mi><mn>1</mn></msub></mtd><mtd columnalign="center"><msub><mi>u</mi><mn>3</mn></msub><msub><mi>v</mi><mn>2</mn></msub></mtd><mtd columnalign="center"><msub><mi>u</mi><mn>3</mn></msub><msub><mi>v</mi><mn>3</mn></msub></mtd></mtr><mtr><mtd columnalign="center"><msub><mi>u</mi><mn>4</mn></msub><msub><mi>v</mi><mn>1</mn></msub></mtd><mtd columnalign="center"><msub><mi>u</mi><mn>4</mn></msub><msub><mi>v</mi><mn>2</mn></msub></mtd><mtd columnalign="center"><msub><mi>u</mi><mn>4</mn></msub><msub><mi>v</mi><mn>3</mn></msub></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mi>.</mi></mrow><annotation encoding="application/x-tex">
\mathbf{u} \otimes \mathbf {v} =\mathbf {u} \mathbf {v} ^{\textsf {T}}={\begin{bmatrix}u_{1}\\u_{2}\\u_{3}\\u_{4}\end{bmatrix}}{\begin{bmatrix}v_{1}&amp;v_{2}&amp;v_{3}\end{bmatrix}}={\begin{bmatrix}u_{1}v_{1}&amp;u_{1}v_{2}&amp;u_{1}v_{3}\\u_{2}v_{1}&amp;u_{2}v_{2}&amp;u_{2}v_{3}\\u_{3}v_{1}&amp;u_{3}v_{2}&amp;u_{3}v_{3}\\u_{4}v_{1}&amp;u_{4}v_{2}&amp;u_{4}v_{3}\end{bmatrix}}.
</annotation></semantics></math></p>
<p>This means the matrix of expected frequencies can be expressed as an outer product thusly:</p>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right"><mstyle mathvariant="bold"><mover><mi>𝐞</mi><mo accent="true">⃗</mo></mover></mstyle><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><mo>×</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>o</mi><mrow><mn>1</mn><mi>j</mi></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr><mtr><mtd columnalign="center"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>o</mi><mrow><mn>2</mn><mi>j</mi></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr><mtr><mtd columnalign="center"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>o</mi><mrow><mn>3</mn><mi>j</mi></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr><mtr><mtd columnalign="center"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>o</mi><mrow><mn>4</mn><mi>j</mi></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr><mtr><mtd columnalign="center"><mi>⋮</mi></mtd></mtr><mtr><mtd columnalign="center"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>o</mi><mrow><mi>n</mi><mi>j</mi></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><msup><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>o</mi><mrow><mi>i</mi><mn>1</mn></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr><mtr><mtd columnalign="center"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>o</mi><mrow><mi>i</mi><mn>2</mn></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr><mtr><mtd columnalign="center"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>o</mi><mrow><mi>i</mi><mn>3</mn></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr><mtr><mtd columnalign="center"><mi>⋯</mi></mtd></mtr><mtr><mtd columnalign="center"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>o</mi><mrow><mi>i</mi><mi>n</mi></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mstyle mathvariant="normal"><mi>T</mi></mstyle></msup></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align}
\mathbf{\vec{e}}= \frac{1}{n} \times \begin{bmatrix} \sum^{n}_{j= 1} \left[ o_{1j} \right] \\  \sum^{n}_{j= 1}
\left[ o_{2j} \right]  \\ \sum^{n}_{j= 1} \left[ o_{3j} \right]   \\
\sum^{n}_{j= 1} \left[ o_{4j} \right]  \\ \vdots  \\
\sum^{n}_{j= 1} \left[ o_{nj} \right]     \end{bmatrix}
\begin{bmatrix}  \sum^{n}_{j= 1} \left[ o_{i1}  \right] \\  \sum^{n}_{j= 1}
\left[ o_{i2}  \right] \\ \sum^{n}_{j= 1} \left[ o_{i3}  \right] \\ \cdots \\
\sum^{n}_{j= 1} \left[ o_{in}  \right]   \end{bmatrix}  ^{\mathrm{T}} \label{eq:1}
\end{align}
</annotation></semantics></math>
<div>
<span class="label">Calculate Expected frequency of values under the assumption of independence.</span>
<div class="sourceCode" id="smst" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="smst-1"><a href="#smst-1"></a><span class="co">## ***** Calculate Summary Stats</span></span>
<span id="smst-2"><a href="#smst-2"></a>n &lt;-<span class="st"> </span><span class="kw">sum</span>(vals)</span>
<span id="smst-3"><a href="#smst-3"></a>bracket_prop &lt;-<span class="st"> </span><span class="kw">colSums</span>(vals) <span class="op">/</span><span class="st"> </span>n</span>
<span id="smst-4"><a href="#smst-4"></a>metric_prop  &lt;-<span class="st"> </span><span class="kw">rowSums</span>(vals) <span class="op">/</span><span class="st"> </span>n</span>
<span id="smst-5"><a href="#smst-5"></a>o &lt;-<span class="st"> </span>vals</span>
<span id="smst-6"><a href="#smst-6"></a>e &lt;-<span class="st"> </span><span class="kw">rowSums</span>(vals) <span class="op">%o%</span><span class="st"> </span><span class="kw">colSums</span>(vals) <span class="op">/</span><span class="st"> </span>n</span>
<span id="smst-7"><a href="#smst-7"></a>chi_obs &lt;-<span class="st"> </span><span class="kw">sum</span>((e<span class="op">-</span>o)<span class="op">^</span><span class="dv">2</span><span class="op">/</span>e)</span></code></pre></div>
</div>
<ol>
<li><p>Testing Independence</p>
<p>In order to test whether or not the distribution of users among brackets is independent of being a follower or friend a <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>χ</mi><mn>2</mn></msup><annotation encoding="application/x-tex">\chi^{2}</annotation></semantics></math> test may be used, this can be evaluated from a model or simulated, in <strong><em>R</em></strong>, the simulated test is shown in listing <em>chib</em>, this provides a <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> -value &lt; 0.0005, which means that the hypothesis of independence may be rejected with a high degree of certainty.</p>
<div>
<span class="label">Chi-Square testing for independence between friend and follower bin categories.</span>
<div class="sourceCode" id="chib" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="chib-1"><a href="#chib-1"></a><span class="kw">chisq.test</span>(vals, <span class="dt">simulate.p.value =</span> <span class="ot">TRUE</span>)</span>
<span id="chib-2"><a href="#chib-2"></a></span>
<span id="chib-3"><a href="#chib-3"></a></span>
<span id="chib-4"><a href="#chib-4"></a><span class="co">##  Pearson&#39;s Chi-squared test with simulated p-value (based on 2000</span></span>
<span id="chib-5"><a href="#chib-5"></a><span class="co">##  replicates)</span></span>
<span id="chib-6"><a href="#chib-6"></a><span class="co">##</span></span>
<span id="chib-7"><a href="#chib-7"></a><span class="co">## data:  vals</span></span>
<span id="chib-8"><a href="#chib-8"></a><span class="co">## X-squared = 88.109, df = NA, p-value = 0.0004998</span></span></code></pre></div>
</div>
<ol>
<li><p>From First Principles</p>
<p>The <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>χ</mi><mn>2</mn></msup><annotation encoding="application/x-tex">\chi^{2}</annotation></semantics></math> statistic may be performed from first principles by randomly sampling the values at the rate at which they occured, tabulating those counts, measuring the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>χ</mi><mn>2</mn></msup><annotation encoding="application/x-tex">\chi^{2}</annotation></semantics></math> -value and then repeating this many times.</p>
<p>Because the samples are random they must be independent and average number of positives is hence an estimate for the <em>FPR</em>, which is in turn an estimate for the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> -value. This technique is demonstrated in listing <em>chif</em>, the p-value being returned as 0.0004, this value is consistent with the value produced by <strong><em>R</em></strong>'s built in <code>chisq.test</code> function and so is accepted.</p>
<div>
<span class="label">Performing a <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>χ</mi><mn>2</mn></msup><annotation encoding="application/x-tex">\chi^{2}</annotation></semantics></math> statistic from first principles</span>
<div class="sourceCode" id="chif" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="chif-1"><a href="#chif-1"></a><span class="co">## ***** Create Vectors of factor levels</span></span>
<span id="chif-2"><a href="#chif-2"></a>brackets &lt;-<span class="st"> </span><span class="kw">unique</span>(x_df<span class="op">$</span>cat)</span>
<span id="chif-3"><a href="#chif-3"></a>metrics &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;follower&quot;</span>, <span class="st">&quot;friend&quot;</span>)</span>
<span id="chif-4"><a href="#chif-4"></a></span>
<span id="chif-5"><a href="#chif-5"></a><span class="co">## ***** Simulate the data Assuming H_0</span></span>
<span id="chif-6"><a href="#chif-6"></a><span class="co">## I.e. assuming that the null hypothesis is true in that</span></span>
<span id="chif-7"><a href="#chif-7"></a><span class="co">## the brackets assigned to followers are independent of the friends</span></span>
<span id="chif-8"><a href="#chif-8"></a><span class="co">## (this is a symmetric relation)</span></span>
<span id="chif-9"><a href="#chif-9"></a></span>
<span id="chif-10"><a href="#chif-10"></a>s &lt;-<span class="st"> </span><span class="kw">replicate</span>(<span class="dv">10</span><span class="op">^</span><span class="dv">4</span>,{</span>
<span id="chif-11"><a href="#chif-11"></a>  <span class="co">## Sample the set of Metrics</span></span>
<span id="chif-12"><a href="#chif-12"></a>  m &lt;-<span class="st"> </span><span class="kw">sample</span>(metrics, <span class="dt">size =</span> n, <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob =</span> metric_prop)</span>
<span id="chif-13"><a href="#chif-13"></a></span>
<span id="chif-14"><a href="#chif-14"></a>  <span class="co">## Sample the set of Brackets (i.e. which performance bracket the user falls in)</span></span>
<span id="chif-15"><a href="#chif-15"></a>  b &lt;-<span class="st"> </span><span class="kw">sample</span>(brackets, <span class="dt">size =</span> n, <span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dt">prob =</span> bracket_prop)</span>
<span id="chif-16"><a href="#chif-16"></a></span>
<span id="chif-17"><a href="#chif-17"></a>  <span class="co">## Make a table of results</span></span>
<span id="chif-18"><a href="#chif-18"></a>  o &lt;-<span class="st"> </span><span class="kw">table</span>(m, b)</span>
<span id="chif-19"><a href="#chif-19"></a>  o</span>
<span id="chif-20"><a href="#chif-20"></a></span>
<span id="chif-21"><a href="#chif-21"></a>  <span class="co">## Find What the expected value would be</span></span>
<span id="chif-22"><a href="#chif-22"></a>  e_sim &lt;-<span class="st"> </span><span class="kw">t</span>(<span class="kw">colSums</span>(e) <span class="op">%o%</span><span class="st"> </span><span class="kw">rowSums</span>(e) <span class="op">/</span><span class="st"> </span>n)</span>
<span id="chif-23"><a href="#chif-23"></a></span>
<span id="chif-24"><a href="#chif-24"></a>  <span class="co">## Calculate the Chi Stat</span></span>
<span id="chif-25"><a href="#chif-25"></a>  chi_sim &lt;-<span class="st"> </span><span class="kw">sum</span>((e_sim<span class="op">-</span>o)<span class="op">^</span><span class="dv">2</span><span class="op">/</span>e_sim)</span>
<span id="chif-26"><a href="#chif-26"></a>  chi_sim</span>
<span id="chif-27"><a href="#chif-27"></a></span>
<span id="chif-28"><a href="#chif-28"></a>  <span class="co">## Is this more extreme, i.e. would we reject null hypothesis?</span></span>
<span id="chif-29"><a href="#chif-29"></a>  chi_sim <span class="op">&gt;</span><span class="st"> </span>chi_obs</span>
<span id="chif-30"><a href="#chif-30"></a></span>
<span id="chif-31"><a href="#chif-31"></a>})</span>
<span id="chif-32"><a href="#chif-32"></a></span>
<span id="chif-33"><a href="#chif-33"></a><span class="kw">mean</span>(s)</span>
<span id="chif-34"><a href="#chif-34"></a></span>
<span id="chif-35"><a href="#chif-35"></a><span class="co">## [1] 4e-04</span></span></code></pre></div>
</div></li>
</ol></li>
</ol>
<h3 id="conclusion"><span class="todo FIXME">FIXME</span> Conclusion</h3>
<p>The <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> -value measures the probability of rejecting the null hypothesis when it is true, i.e. the probability of a detecting a <em>false positive</em>, a very small <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> -value is hence good evidence that the null hypothesis should be rejected (because doing so would unlikely to be a mistake).</p>
<p>In saying that however the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> -value is distinct from the <em>power</em> statistic, which is a measure of //the probability of accepting the alternative hypothesis/ when it is true, a low <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> -value is not a measurement of the probability of being correct.</p>
<p>Hence me way conclude, with a high degree of certainty, that the follower and friend counts are not independent of one another.</p>
<h1 id="finding-themes-in-tweets">8.2 Finding Themes in tweets</h1>
<h2 id="find-users-with-above-average-friend-counts">8.2.8 Find Users with Above Average Friend Counts</h2>
<p>Users with Above average Friend Counts can be identified by filtering the tweets data frame for two conditions:</p>
<ol>
<li>non-duplicated <code>user-id</code></li>
<li><code>friend_count</code> greater than average</li>
</ol>
<p>This can be acheived easily using the <code>dplyr</code> package as shown in <em>hfdp</em>, the top 20 of these users are shown in table <em>hfls</em> of the appendix</p>
<div>
<span class="label">Use <code>dplyr</code> to Filter for Users with a high Friend Count</span>
<div class="sourceCode" id="hfdp" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="hfdp-1"><a href="#hfdp-1"></a>select &lt;-<span class="st"> </span>dplyr<span class="op">::</span>select</span>
<span id="hfdp-2"><a href="#hfdp-2"></a>filter &lt;-<span class="st"> </span>dplyr<span class="op">::</span>filter</span>
<span id="hfdp-3"><a href="#hfdp-3"></a>interested_vars &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;user_id&quot;</span>, <span class="st">&quot;friends_count&quot;</span>)</span>
<span id="hfdp-4"><a href="#hfdp-4"></a>(friend_counts &lt;-<span class="st"> </span>tweets.company <span class="op">%&gt;%</span></span>
<span id="hfdp-5"><a href="#hfdp-5"></a><span class="st">  </span><span class="kw">select</span>(interested_vars) <span class="op">%&gt;%</span></span>
<span id="hfdp-6"><a href="#hfdp-6"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">duplicated</span>(user_id)))</span>
<span id="hfdp-7"><a href="#hfdp-7"></a></span>
<span id="hfdp-8"><a href="#hfdp-8"></a>(high_friends &lt;-<span class="st"> </span>friend_counts <span class="op">%&gt;%</span></span>
<span id="hfdp-9"><a href="#hfdp-9"></a><span class="st">  </span><span class="kw">filter</span>(friends_count <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(friends_count, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)))</span>
<span id="hfdp-10"><a href="#hfdp-10"></a></span>
<span id="hfdp-11"><a href="#hfdp-11"></a><span class="co">## Export Friends List</span></span>
<span id="hfdp-12"><a href="#hfdp-12"></a><span class="kw">write.csv</span>(high_friends[<span class="kw">order</span>(</span>
<span id="hfdp-13"><a href="#hfdp-13"></a>  high_friends<span class="op">$</span>friends_count,</span>
<span id="hfdp-14"><a href="#hfdp-14"></a>  <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),], <span class="dt">file =</span> <span class="st">&quot;/tmp/highfriend.csv&quot;</span>)</span></code></pre></div>
</div>
<h2 id="find-users-with-below-average-friend-counts">8.2.9 Find Users with Below Average Friend Counts</h2>
<p>Users with high friends may be determined by a similar method (or by taking the complement of the high friends) as shown in listing <em>lfcd</em>, the lowest 20 of these users are shown in table <em>lftb</em> of the appendix.</p>
<div>
<span class="label">Use <code>dplyr</code> to Filter for Users with a low Friend Count</span>
<div class="sourceCode" id="lfcd" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="lfcd-1"><a href="#lfcd-1"></a>(low_friends &lt;-<span class="st"> </span>friend_counts <span class="op">%&gt;%</span></span>
<span id="lfcd-2"><a href="#lfcd-2"></a><span class="st">  </span><span class="kw">filter</span>(friends_count <span class="op">&lt;=</span><span class="st"> </span><span class="kw">mean</span>(friends_count, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)))</span>
<span id="lfcd-3"><a href="#lfcd-3"></a></span>
<span id="lfcd-4"><a href="#lfcd-4"></a> low_friends &lt;-<span class="st"> </span>low_friends[<span class="kw">order</span>(</span>
<span id="lfcd-5"><a href="#lfcd-5"></a>   low_friends<span class="op">$</span>friends_count,</span>
<span id="lfcd-6"><a href="#lfcd-6"></a>   <span class="dt">decreasing =</span> <span class="ot">TRUE</span>),]</span>
<span id="lfcd-7"><a href="#lfcd-7"></a></span>
<span id="lfcd-8"><a href="#lfcd-8"></a><span class="co">## Export Users</span></span>
<span id="lfcd-9"><a href="#lfcd-9"></a><span class="kw">write.csv</span>(low_friends[<span class="kw">order</span>(</span>
<span id="lfcd-10"><a href="#lfcd-10"></a>  low_friends<span class="op">$</span>friends_count,</span>
<span id="lfcd-11"><a href="#lfcd-11"></a>  <span class="dt">decreasing =</span> <span class="ot">FALSE</span>),], <span class="dt">file =</span> <span class="st">&quot;/tmp/lowfriend.csv&quot;</span>)</span></code></pre></div>
</div>
<h2 id="find-the-tweets-corresponding-to-users-with-high-or-low-friend-counts">8.2.10 Find the <em>Tweets</em> corresponding to users with high or low friend counts</h2>
<p>The tweets corresponding to users with high and low friend counts can be identified by filtering the dataframe based on the friend count and using that to the index the tweets from the data frame <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, alternatively it is possible to test whether or not the ID of a user appears in the high or low vector set using the <code>%in%</code> operator as shown in listing <em>8210</em>.</p>
<div>
<span class="label">Identify tweets corresponding to users with high and low friend counts</span>
<div class="sourceCode" id="8210" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="8210-1"><a href="#8210-1"></a><span class="co">## Method 1</span></span>
<span id="8210-2"><a href="#8210-2"></a>friend_test &lt;-<span class="st"> </span>tweets.company<span class="op">$</span>friends_count <span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(tweets.company<span class="op">$</span>friends_count)</span>
<span id="8210-3"><a href="#8210-3"></a>tweets_high &lt;-<span class="st"> </span>tweets.company<span class="op">$</span>text[friend_test]</span>
<span id="8210-4"><a href="#8210-4"></a>tweets_low &lt;-<span class="st"> </span>tweets.company<span class="op">$</span>text[<span class="op">!</span>friend_test]</span>
<span id="8210-5"><a href="#8210-5"></a></span>
<span id="8210-6"><a href="#8210-6"></a><span class="co">## Method 2                                                                 :15b5a74:</span></span>
<span id="8210-7"><a href="#8210-7"></a>tweets_high &lt;-<span class="st"> </span>tweets.company<span class="op">$</span>text[tweets.company<span class="op">$</span>user_id <span class="op">%in%</span><span class="st">  </span>high_friends<span class="op">$</span>user_id]</span>
<span id="8210-8"><a href="#8210-8"></a>tweets_low  &lt;-<span class="st"> </span>tweets.company<span class="op">$</span>text[tweets.company<span class="op">$</span>user_id <span class="op">%in%</span><span class="st">  </span>low_friends<span class="op">$</span>user_id]</span>
<span id="8210-9"><a href="#8210-9"></a>tweets &lt;-<span class="st"> </span><span class="kw">c</span>(tweets_high, tweets_low)</span>
<span id="8210-10"><a href="#8210-10"></a></span>
<span id="8210-11"><a href="#8210-11"></a><span class="co">## Mark as High or Low</span></span>
<span id="8210-12"><a href="#8210-12"></a>tweets_low &lt;-<span class="st"> </span><span class="kw">cbind</span>(tweets_low, <span class="kw">rep</span>(<span class="st">&quot;Low_Friend&quot;</span>, <span class="kw">length</span>(tweets_low)))</span>
<span id="8210-13"><a href="#8210-13"></a>tweets_high &lt;-<span class="st"> </span><span class="kw">cbind</span>(tweets_high, <span class="kw">rep</span>(<span class="st">&quot;High_Friend&quot;</span>, <span class="kw">length</span>(tweets_high)))</span>
<span id="8210-14"><a href="#8210-14"></a>tweets &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">rbind</span>(tweets_high, tweets_low))</span>
<span id="8210-15"><a href="#8210-15"></a>tweets<span class="op">$</span>Friend_Status  &lt;-<span class="st"> </span><span class="kw">factor</span>(tweets<span class="op">$</span>Friend_Status)</span></code></pre></div>
</div>
<h2 id="clean-the-tweets">8.2.11 Clean the tweets</h2>
<h3 id="create-a-corpus-object">Create a Corpus Object</h3>
<p>In order to clean the tweets it is necessary to create a corpus object as shown in listing <em>cpmk</em>, it is possible to pass a dataframe source in order to include the user ID, this isn't strictly necessary however because the <code>tm</code> package preserves order when performing transformations.</p>
<div>
<span class="label">Create a Corpus from the tweets</span>
<div class="sourceCode" id="cpmk" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="cpmk-1"><a href="#cpmk-1"></a>tweet_source &lt;-<span class="st"> </span>tm<span class="op">::</span><span class="kw">VectorSource</span>(tweets<span class="op">$</span>text)</span>
<span id="cpmk-2"><a href="#cpmk-2"></a>tweet_corpus &lt;-<span class="st"> </span>tm<span class="op">::</span><span class="kw">Corpus</span>(<span class="dt">x =</span> tweet_source)</span></code></pre></div>
</div>
<p>Next it is necessary to choose an enoding, a primary consideration of this is whether or not the use of <em>emoji</em> characters will influence the model performance. There is research to suggest that Emoji's can be used as predictive features <span class="citation" data-cites="lecompte2017">cite:lecompte2017</span> and that they can improve <em>sentiment analysis</em> models <span class="citation" data-cites="shiha2017">cite:shiha2017</span> that implement a <em>bag of words</em> approach. For these reasons <em>emoji</em> characters will be preserved and <a href="http://www.utf-8.com/">UTF-8</a> implemented.</p>
<p>In order to encode the data as <em>UTF-8</em>, the <code>iconv</code> function can be used as shown in listing <em>icv</em>.</p>
<div>
<span class="label">Encode the Data as UTF-8</span>
<div class="sourceCode" id="icv" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="icv-1"><a href="#icv-1"></a>encode &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="icv-2"><a href="#icv-2"></a>    <span class="kw">iconv</span>(x, <span class="dt">to =</span> <span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="icv-3"><a href="#icv-3"></a><span class="co">#    iconv(x, to = &quot;latin1&quot;)</span></span>
<span id="icv-4"><a href="#icv-4"></a>  <span class="co">#  iconv(x, to = &quot;ASCII&quot;)</span></span>
<span id="icv-5"><a href="#icv-5"></a>}</span>
<span id="icv-6"><a href="#icv-6"></a></span>
<span id="icv-7"><a href="#icv-7"></a>tweet_corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(<span class="dt">x =</span> tweet_corpus, <span class="dt">FUN =</span> encode)</span>
<span id="icv-8"><a href="#icv-8"></a>tweet_corpus_raw &lt;-<span class="st"> </span>tweet_corpus</span></code></pre></div>
</div>
<h3 id="process-the-tweets">Process the tweets</h3>
<p>Before analysis the tweets should be modified to remove characters that may interfere with categorising words, this is referred to as cleaning, in particular the following should be implemented:</p>
<ol>
<li>Remove URL's</li>
<li>Remove Usernames</li>
<li>remove numbers</li>
<li>remove punctuation</li>
<li>remove whitespace</li>
<li>case fold all characters to lower case</li>
<li>remove a set of stop words</li>
<li>reduce each word to its stem</li>
</ol>
<p>In particular it is important to reduce words to lower case before removing stop words otherwise an unorthodox use of capitalisation may prevent the word from being removed throughout.</p>
<p>The stop word <code>ubisoft</code> will also be used, this was the query term so it's expected to turn up at a very high frequency, the words <code>can</code> and <code>'s</code> also occured quite frequently and so were removed.</p>
<p>The cleaning can be implemented by mapping functions over the corpus, which is fundamentally a list, this can be performed via the <code>tm_map</code> function as shown in listing <em>cltw</em>.</p>
<div>
<span class="label">Use the <code>tm_map</code> function to clean the tweets</span>
<div class="sourceCode" id="cltw" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="cltw-1"><a href="#cltw-1"></a>mystop &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">stopwords</span>(), <span class="st">&quot;’s&quot;</span>, <span class="st">&quot;can&quot;</span>, <span class="st">&quot;ubisoft&quot;</span>, <span class="st">&quot;@ubisoft&quot;</span>, <span class="st">&quot;#ubisoft&quot;</span>)<span class="co"># &lt;&lt;stphere&gt;&gt;</span></span>
<span id="cltw-2"><a href="#cltw-2"></a></span>
<span id="cltw-3"><a href="#cltw-3"></a>clean_corp &lt;-<span class="st"> </span><span class="cf">function</span>(corpus) {</span>
<span id="cltw-4"><a href="#cltw-4"></a>  <span class="co">## Remove URL&#39;s</span></span>
<span id="cltw-5"><a href="#cltw-5"></a>  corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus,<span class="kw">content_transformer</span>(<span class="cf">function</span>(x) <span class="kw">gsub</span>(<span class="st">&quot;(f|ht)tp(s?)://</span><span class="ch">\\</span><span class="st">S+&quot;</span>,<span class="st">&quot;&quot;</span>,x)))</span>
<span id="cltw-6"><a href="#cltw-6"></a>  <span class="co">## Remove Usernames</span></span>
<span id="cltw-7"><a href="#cltw-7"></a>  corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus,<span class="kw">content_transformer</span>(<span class="cf">function</span>(x) <span class="kw">gsub</span>(<span class="st">&quot;@</span><span class="ch">\\</span><span class="st">w+&quot;</span>,<span class="st">&quot;&quot;</span>,x)))</span>
<span id="cltw-8"><a href="#cltw-8"></a>  <span class="co">## Misc</span></span>
<span id="cltw-9"><a href="#cltw-9"></a>  corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, <span class="dt">FUN =</span> removeNumbers)</span>
<span id="cltw-10"><a href="#cltw-10"></a>  corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, <span class="dt">FUN =</span> removePunctuation)</span>
<span id="cltw-11"><a href="#cltw-11"></a>  corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, <span class="dt">FUN =</span> stripWhitespace)</span>
<span id="cltw-12"><a href="#cltw-12"></a>  corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, <span class="dt">FUN =</span> tolower)</span>
<span id="cltw-13"><a href="#cltw-13"></a>  corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, <span class="dt">FUN =</span> removeWords, mystop)</span>
<span id="cltw-14"><a href="#cltw-14"></a>  <span class="co">## stopwords() returns characters and is fead as second argument</span></span>
<span id="cltw-15"><a href="#cltw-15"></a>  corpus &lt;-<span class="st"> </span><span class="kw">tm_map</span>(corpus, <span class="dt">FUN =</span> stemDocument)</span>
<span id="cltw-16"><a href="#cltw-16"></a>  <span class="kw">return</span>(corpus)</span>
<span id="cltw-17"><a href="#cltw-17"></a>}</span>
<span id="cltw-18"><a href="#cltw-18"></a></span>
<span id="cltw-19"><a href="#cltw-19"></a>tweet_corpus_clean &lt;-<span class="st"> </span><span class="kw">clean_corp</span>(tweet_corpus)</span></code></pre></div>
</div>
<h2 id="display-the-first-two-tweets-beforeafter-processing">8.2.12 Display the first two tweets before/after processing</h2>
<p>The tweets can be viewed from inside the corpus by selecting with the <code>[</code> function <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> as demonstrated in listing <em>ispt</em>, the first <em>tweet</em> was rendered empty by the processing and the following two tweets were:</p>
<ul>
<li><p><strong><em>Pre-Processing</em></strong></p>
<blockquote>
<ul>
<li><p>"Today was the first time in over a month that I have gone 24 hours without checking the coronavirus death toll. Thanks <code>@Ubisoft</code>."</p></li>
<li><p>"<span class="citation" data-cites="btwimskrank">@btwimskrank</span> <code>@TheDivisionGame</code> <code>@UbiMassive</code> <code>@Ubisoft</code> <code>@jgerighty</code> <code>@hamishbode</code> <code>@Tideman92</code> <code>@janeyo_jane</code> <code>@slimjd</code> Very odd… I'll even post a video about it."</p></li>
</ul>
</blockquote></li>
<li><p><strong><em>Post-Processing</em></strong></p>
<blockquote>
<ul>
<li><p>"today first time month gone hour without check coronavirus death toll thank"</p></li>
<li><p>"odd ill even post video"</p></li>
</ul>
</blockquote></li>
</ul>
<div>
<span class="label">Load the Packages for <strong><strong><em>R</em></strong></strong></span>
<div class="sourceCode" id="ispt" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="ispt-1"><a href="#ispt-1"></a>tweet_corpus_raw[[<span class="dv">1</span>]]<span class="op">$</span>content</span>
<span id="ispt-2"><a href="#ispt-2"></a>tweet_corpus_clean[[<span class="dv">1</span>]]<span class="op">$</span>content</span>
<span id="ispt-3"><a href="#ispt-3"></a>tweet_corpus_raw[[<span class="dv">2</span>]]<span class="op">$</span>content</span>
<span id="ispt-4"><a href="#ispt-4"></a>tweet_corpus_clean[[<span class="dv">2</span>]]<span class="op">$</span>content</span>
<span id="ispt-5"><a href="#ispt-5"></a>tweet_corpus_raw[[<span class="dv">3</span>]]<span class="op">$</span>content</span>
<span id="ispt-6"><a href="#ispt-6"></a>tweet_corpus_clean[[<span class="dv">3</span>]]<span class="op">$</span>content</span></code></pre></div>
</div>
<h2 id="create-a-term-document-matrix">8.2.13 Create a Term Document Matrix</h2>
<h3 id="apply-weighting-manually">Apply Weighting Manually</h3>
<ol>
<li><p>Create Term Documen Matrix</p>
<p>A term Document matrix (and it's transpose) can be constructed from a <code>corpus</code> using the <code>tm:TermDocumentMatrix</code> function as shown in listing <em>tdm</em>.</p>
<div>
<span class="label">Load the Packages for <strong><strong><em>R</em></strong></strong></span>
<div class="sourceCode" id="tdm" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="tdm-1"><a href="#tdm-1"></a>tweet_matrix_tdm &lt;-<span class="st"> </span><span class="kw">TermDocumentMatrix</span>(tweet_corpus_clean)</span>
<span id="tdm-2"><a href="#tdm-2"></a>tweet_matrix_dtm &lt;-<span class="st"> </span><span class="kw">DocumentTermMatrix</span>(tweet_corpus_clean)</span></code></pre></div>
</div></li>
<li><p>Apply TF-IDF Weighting</p>
<p>Weighted term frequency is defined as shown in equation eqref:tfidf, where:</p>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>f</mi><mrow><mi>d</mi><mo>,</mo><mi>t</mi></mrow></msub><annotation encoding="application/x-tex">f_{d,t}</annotation></semantics></math> is the frequency of a given term <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> in the a document <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>d</mi><annotation encoding="application/x-tex">d</annotation></semantics></math></li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>w</mi><mrow><mi>d</mi><mo>,</mo><mi>t</mi></mrow></msub><annotation encoding="application/x-tex">w_{d,t}</annotation></semantics></math> is the weight of a given term <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> in the a document <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>d</mi><annotation encoding="application/x-tex">d</annotation></semantics></math></li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math> is the number of documents</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>f</mi><mi>t</mi></msub><annotation encoding="application/x-tex">f_{t}</annotation></semantics></math> is the number of documents containing <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math></li>
</ul>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right"><msub><mi>w</mi><mrow><mi>d</mi><mo>,</mo><mi>t</mi></mrow></msub></mtd><mtd columnalign="left"><mo>=</mo><msub><mstyle mathvariant="normal"><mi>T</mi><mi>F</mi></mstyle><mi>t</mi></msub><mo>×</mo><msub><mstyle mathvariant="normal"><mi>I</mi><mi>D</mi><mi>F</mi></mstyle><mrow><mi>d</mi><mo>,</mo><mi>t</mi></mrow></msub></mtd></mtr><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>=</mo><msub><mo>log</mo><mi>e</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>f</mi><mrow><mi>d</mi><mo>,</mo><mi>t</mi></mrow></msub><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><msub><mo>log</mo><mi>e</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mi>N</mi><msub><mi>f</mi><mi>t</mi></msub></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
w_{d, t} &amp;=\mathrm{TF}_{t} \times \mathrm{IDF}_{d, t} \\
&amp;=\log _{e}\left(f_{d, t}+1\right) \log _{e}\left(\frac{N}{f_{t}}\right) \label{tfidf}
\end{aligned}</annotation></semantics></math></p>
<p>This would requre multiplying each term of each row of the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mstyle mathvariant="normal"><mi>T</mi><mi>F</mi></mstyle><mi>t</mi></msub><annotation encoding="application/x-tex">\mathrm{TF}_{t}</annotation></semantics></math> matrix by the corresponding vector element of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mstyle mathvariant="normal"><mi>I</mi><mi>D</mi><mi>F</mi></mstyle><mrow><mi>d</mi><mo>,</mo><mi>t</mi></mrow></msub><annotation encoding="application/x-tex">\mathrm{IDF}_{d,t}</annotation></semantics></math>, this can be implemented by taking the matrix product of a diagonalised matrix, this is shown in listing <em>mytfidf</em>.</p>
<div>
<span class="label">Apply TF-IDF Weigting</span>
<div class="sourceCode" id="mytfidf" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="mytfidf-1"><a href="#mytfidf-1"></a>N &lt;-<span class="st"> </span><span class="kw">nrow</span>(<span class="kw">as.matrix</span>(tweet_matrix_dtm))   <span class="co"># Number of Documents</span></span>
<span id="mytfidf-2"><a href="#mytfidf-2"></a>ft=<span class="kw">colSums</span>(<span class="kw">as.matrix</span>(tweet_matrix_dtm) <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="co">#in how many documents term t appeared in,</span></span>
<span id="mytfidf-3"><a href="#mytfidf-3"></a></span>
<span id="mytfidf-4"><a href="#mytfidf-4"></a>TF &lt;-<span class="st"> </span><span class="kw">log</span>(<span class="kw">as.matrix</span>(tweet_matrix_dtm) <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)  <span class="co"># built in uses log2()</span></span>
<span id="mytfidf-5"><a href="#mytfidf-5"></a>IDF &lt;-<span class="st"> </span><span class="kw">log</span>(N<span class="op">/</span>ft)</span>
<span id="mytfidf-6"><a href="#mytfidf-6"></a></span>
<span id="mytfidf-7"><a href="#mytfidf-7"></a>tweet_weighted           &lt;-<span class="st"> </span>TF <span class="op">%*%</span><span class="st"> </span><span class="kw">diag</span>(IDF)</span>
<span id="mytfidf-8"><a href="#mytfidf-8"></a><span class="kw">colnames</span>(tweet_weighted) &lt;-<span class="st"> </span><span class="kw">colnames</span>(tweet_matrix_dtm)</span></code></pre></div>
</div>
<p>There is however a function built in to the <code>tm</code> package that will weight term document matrices and this will instead be implented to analyse the data because it will produce more maintainable code.</p></li>
</ol>
<h3 id="apply-weighting-with-built-in-function">Apply Weighting with Built in Function</h3>
<p>In order to create a term document matrix (and its transpose) with TF-IDF weighted values, the <code>weighting</code> argument may be specified as <code>weightTfIdf</code> by passing an appropriate list to the <code>control</code> argument of the <code>TermDocumentMatrix</code>, as shown in listing <em>btdm</em></p>
<div>
<span class="label">Create a Document Term Matrix by transforming a Term Document Matrix</span>
<div class="sourceCode" id="btdm" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="btdm-1"><a href="#btdm-1"></a>tweet_weighted_tdm &lt;-<span class="st"> </span>tm<span class="op">::</span><span class="kw">TermDocumentMatrix</span>(<span class="dt">x =</span> tweet_corpus_clean, <span class="dt">control =</span> <span class="kw">list</span>(<span class="dt">weighting =</span> weightTfIdf))</span>
<span id="btdm-2"><a href="#btdm-2"></a>tweet_weighted_dtm &lt;-<span class="st"> </span><span class="kw">as.DocumentTermMatrix</span>()  <span class="op">%&gt;%</span></span>
<span id="btdm-3"><a href="#btdm-3"></a><span class="st">                        </span><span class="kw">as.matrix</span>()</span></code></pre></div>
</div>
<h3 id="remove-empty-documents">Remove Empty Documents</h3>
<p>Empty Documents may be removed from the matrix by a logical test as shown in listing <em>emp</em> <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> this provides that 328 documents were empty following the processing. A summary of the first rows and columns of this matrix, following the removal of empty documents, is provided in table <em>tfidf</em> of the appendix.</p>
<div>
<span class="label">Load the Packages for <strong><strong><em>R</em></strong></strong></span>
<div class="sourceCode" id="emp" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="emp-1"><a href="#emp-1"></a>null =<span class="st"> </span><span class="kw">which</span>(<span class="kw">rowSums</span>(<span class="kw">as.matrix</span>(tweet_weighted_dtm)) <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="emp-2"><a href="#emp-2"></a><span class="kw">rowSums</span>(<span class="kw">as.matrix</span>(tweet_weighted_dtm)<span class="op">==</span><span class="dv">0</span>)</span>
<span id="emp-3"><a href="#emp-3"></a></span>
<span id="emp-4"><a href="#emp-4"></a><span class="cf">if</span>(<span class="kw">length</span>(null)<span class="op">!=</span><span class="dv">0</span>){</span>
<span id="emp-5"><a href="#emp-5"></a>  tweet_weighted_dtm =<span class="st"> </span>tweet_weighted_dtm[<span class="op">-</span>null,]</span>
<span id="emp-6"><a href="#emp-6"></a>}</span>
<span id="emp-7"><a href="#emp-7"></a></span>
<span id="emp-8"><a href="#emp-8"></a><span class="kw">length</span>(null)</span>
<span id="emp-9"><a href="#emp-9"></a></span>
<span id="emp-10"><a href="#emp-10"></a><span class="co">## [1] 328</span></span></code></pre></div>
</div>
<h2 id="how-many-clusters-are-there">8.2.14 How many Clusters are there</h2>
<h3 id="use-cosine-distance">Use Cosine Distance</h3>
<p>In order to consider clustering, it can be more effective to consider the distance between the weigted documents in terms of cosine distance, the cosine distance can be calculated from the euclidean distance using the identity shown in eqref:cos, and this can be performed in <strong><em>R</em></strong> by taking the matrix product of a diagonalised matrix as shown in listing <em>dist</em>.</p>
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right"><mstyle mathvariant="normal"><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi></mstyle><mrow><mo stretchy="true" form="prefix">(</mo><mstyle mathvariant="bold"><mi>𝐗</mi></mstyle><mo>,</mo><mstyle mathvariant="bold"><mi>𝐘</mi></mstyle><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mrow><mo stretchy="true" form="prefix">|</mo><mrow><mo stretchy="true" form="prefix">|</mo><mstyle mathvariant="bold"><mi>𝐗</mi></mstyle><mo>−</mo><mstyle mathvariant="bold"><mi>𝐘</mi></mstyle><mo stretchy="true" form="postfix">|</mo></mrow><mo stretchy="true" form="postfix">|</mo></mrow></mtd></mtr><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>=</mo><msqrt><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo stretchy="true" form="postfix">]</mo></mrow></mrow></msqrt></mtd></mtr><mtr><mtd columnalign="right"><mstyle mathvariant="normal"><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi></mstyle><msup><mrow><mo stretchy="true" form="prefix">(</mo><mstyle mathvariant="bold"><mi>𝐗</mi></mstyle><mo>,</mo><mstyle mathvariant="bold"><mi>𝐘</mi></mstyle><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup></mtd><mtd columnalign="left"><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">[</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mo stretchy="true" form="postfix">]</mo></mrow></mtd></mtr><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">(</mo><msup><mi>x</mi><mn>2</mn></msup><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">(</mo><msubsup><mi>y</mi><mi>i</mi><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mn>2</mn><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>x</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mtd></mtr><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>=</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>2</mn><mo>×</mo><mfrac><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>x</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mfrac></mtd></mtr><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>=</mo><mn>2</mn><mo>+</mo><mn>2</mn><mo>×</mo><mfrac><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>x</mi><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mrow><mo stretchy="true" form="prefix">|</mo><mrow><mo stretchy="true" form="prefix">|</mo><mstyle mathvariant="bold"><mi>𝐗</mi></mstyle><mo stretchy="true" form="postfix">|</mo></mrow><mo stretchy="true" form="postfix">|</mo></mrow><mo>×</mo><mrow><mo stretchy="true" form="prefix">|</mo><mrow><mo stretchy="true" form="prefix">|</mo><mstyle mathvariant="bold"><mi>𝐘</mi></mstyle><mo stretchy="true" form="postfix">|</mo></mrow><mo stretchy="true" form="postfix">|</mo></mrow></mrow></mfrac></mtd></mtr><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>=</mo><mn>2</mn><mo>+</mo><mn>2</mn><mo>cos</mo><mrow><mo stretchy="true" form="prefix">(</mo><mstyle mathvariant="bold"><mi>𝐗</mi></mstyle><mo>,</mo><mstyle mathvariant="bold"><mi>𝐘</mi></mstyle><mo stretchy="true" form="postfix">)</mo></mrow></mtd></mtr><mtr><mtd columnalign="right"><mspace width="0.222em"></mspace></mtd></mtr><mtr><mtd columnalign="right"></mtd><mtd columnalign="left"><mo>⟹</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mo>cos</mo><mrow><mo stretchy="true" form="prefix">(</mo><mstyle mathvariant="bold"><mi>𝐗</mi></mstyle><mo>,</mo><mstyle mathvariant="bold"><mi>𝐘</mi></mstyle><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mrow><mstyle mathvariant="normal"><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi></mstyle><mrow><mo stretchy="true" form="prefix">(</mo><mstyle mathvariant="bold"><mi>𝐗</mi></mstyle><mo>,</mo><mstyle mathvariant="bold"><mi>𝐘</mi></mstyle><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mn>2</mn></mfrac></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align}
\mathrm{dist}\left( \mathbf{X}, \mathbf{Y} \right)= \left| \left| \mathbf{X}-\mathbf{Y} \right| \right| \\
&amp;= \sqrt{\sum^{n}_{i= 1}   \left[ \left( x_i-y_i \right)^2 \right] } \\
\mathrm{dist}\left( \mathbf{X}, \mathbf{Y} \right)^2&amp;= \sum^{n}_{i= 1}  \left[ \left( x_i-y_i \right)^2 \right] \\
&amp;= \sum^{n}_{i= 1}   \left( x^2 \right)+  \sum^{n}_{i= 1}   \left( y_i^2 \right)+ 2 \sum^{n}_{i= 1}   \left( x_iy_i \right) \\
&amp;= 1+ 1 +  2 \times  \frac{\sum^{n}_{i= 1}   \left( x_iy_i \right)}{\left( 1 \right) }\\
&amp;= 2+ 2\times \frac{\sum^{n}_{i= 1}   \left( x_iy_i \right)}{\left| \left| \mathbf{X} \right| \right|\times \left| \left| \mathbf{Y} \right| \right|}\\
&amp;= 2+ 2 \cos\left( \mathbf{X}, \mathbf{Y} \right)\\
\ \\
&amp; \implies  \left( 1- \cos\left( \mathbf{X}, \mathbf{Y} \right) \right) = \frac{\mathrm{dist}\left( \mathbf{X}, \mathbf{Y} \right)}{2} \label{cos}
\end{align}
</annotation></semantics></math>
<div>
<span class="label">Load the Packages for <strong><strong><em>R</em></strong></strong></span>
<div class="sourceCode" id="dist" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="dist-1"><a href="#dist-1"></a>norm.tweet_weighted_dtm =<span class="st"> </span><span class="kw">diag</span>(</span>
<span id="dist-2"><a href="#dist-2"></a>                    <span class="dv">1</span><span class="op">/</span><span class="kw">sqrt</span>(<span class="kw">rowSums</span>(tweet_weighted_dtm<span class="op">^</span><span class="dv">2</span>))</span>
<span id="dist-3"><a href="#dist-3"></a>                    ) <span class="op">%*%</span><span class="st"> </span>tweet_weighted_dtm</span>
<span id="dist-4"><a href="#dist-4"></a>D =<span class="kw">dist</span>(norm.tweet_weighted_dtm, <span class="dt">method =</span> <span class="st">&quot;euclidean&quot;</span>)<span class="op">^</span><span class="dv">2</span><span class="op">/</span><span class="dv">2</span></span></code></pre></div>
</div>
<h3 id="project-into-euclidean-space">Project into Euclidean Space</h3>
<p>The cosine distance however is not appropriate to perform clustering on and so instead should be projected back into euclidean space, this can be acheived using <em>Multi-Dimensional Scaling</em> via the <code>cmdscale</code> functionas shown in listing <em>mds</em>. The distance is a measure of between document distance so the number of dimensions should correspond to the number of documents, however, if there are zero-value eigenvalues, these dimensions won't help explain the data in the projection, hence the number of eigenvalues has been used as the dimension of projection in this case.</p>
<div>
<span class="label">Load the Packages for <strong><strong><em>R</em></strong></strong></span>
<div class="sourceCode" id="mds" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="mds-1"><a href="#mds-1"></a>l &lt;-<span class="st"> </span><span class="kw">min</span>(<span class="kw">nrow</span>(tweet_weighted_dtm),</span>
<span id="mds-2"><a href="#mds-2"></a>         <span class="kw">ncol</span>(tweet_weighted_dtm))</span>
<span id="mds-3"><a href="#mds-3"></a>ev &lt;-<span class="st"> </span><span class="kw">eigen</span>(tweet_weighted_dtm[<span class="dv">1</span><span class="op">:</span>l, <span class="dv">1</span><span class="op">:</span>l])</span>
<span id="mds-4"><a href="#mds-4"></a>k &lt;-<span class="st"> </span>(ev<span class="op">$</span>values <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sum</span>()</span>
<span id="mds-5"><a href="#mds-5"></a></span>
<span id="mds-6"><a href="#mds-6"></a>mds.tweet_weighted_dtm &lt;-<span class="st"> </span><span class="kw">cmdscale</span>(D, <span class="dt">k=</span>k) <span class="co">#TODO What should K be? see issue #10</span></span></code></pre></div>
</div>
<h3 id="measure-within-cluster-variance">Measure Within Cluster Variance</h3>
<p>In order to determine the appropriate number of clusters, the within cluster variance can be measurd, the number of clusters at which this value ceases to decrease is indicative of a potentially appropriate number of clusters. This is implemented in listing <em>ssw</em> and shown in figure <em>sswp</em>.</p>
<div>
<span class="label">Use a loop to evaluate the performace of various cluster models, plot this with <em>ggplot2</em></span>
<div class="sourceCode" id="ssw" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="ssw-1"><a href="#ssw-1"></a><span class="kw">set.seed</span>(<span class="dv">271</span>)</span>
<span id="ssw-2"><a href="#ssw-2"></a>n =<span class="st"> </span><span class="dv">15</span> <span class="co"># Assume it bends at 7 clusters</span></span>
<span id="ssw-3"><a href="#ssw-3"></a>SSW =<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, n)</span>
<span id="ssw-4"><a href="#ssw-4"></a><span class="cf">for</span> (a <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n) {</span>
<span id="ssw-5"><a href="#ssw-5"></a>  K =<span class="st"> </span><span class="kw">kmeans</span>(mds.tweet_weighted_dtm, a, <span class="dt">nstart =</span> <span class="dv">20</span>)</span>
<span id="ssw-6"><a href="#ssw-6"></a>  SSW[a] =<span class="st"> </span>K<span class="op">$</span>tot.withinss</span>
<span id="ssw-7"><a href="#ssw-7"></a>  <span class="kw">paste</span>(a<span class="op">*</span><span class="dv">100</span><span class="op">/</span>n, <span class="st">&quot;%&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">print</span>()</span>
<span id="ssw-8"><a href="#ssw-8"></a>}</span>
<span id="ssw-9"><a href="#ssw-9"></a>SSW</span>
<span id="ssw-10"><a href="#ssw-10"></a></span>
<span id="ssw-11"><a href="#ssw-11"></a></span>
<span id="ssw-12"><a href="#ssw-12"></a>SSW_tb &lt;-<span class="st"> </span>tibble<span class="op">::</span><span class="kw">enframe</span>(SSW)</span>
<span id="ssw-13"><a href="#ssw-13"></a><span class="kw">ggplot</span>(SSW_tb, <span class="kw">aes</span>(<span class="dt">x =</span> name, <span class="dt">y =</span> value)) <span class="op">+</span></span>
<span id="ssw-14"><a href="#ssw-14"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">col =</span> <span class="st">&quot;#Cd5b45&quot;</span>, <span class="dt">size =</span> <span class="dv">5</span>) <span class="op">+</span></span>
<span id="ssw-15"><a href="#ssw-15"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">col =</span> <span class="st">&quot;#Da70d6&quot;</span>) <span class="op">+</span></span>
<span id="ssw-16"><a href="#ssw-16"></a><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">7</span>, <span class="dt">lty  =</span> <span class="dv">3</span>, <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span></span>
<span id="ssw-17"><a href="#ssw-17"></a><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="ssw-18"><a href="#ssw-18"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Number of Clusters&quot;</span>,</span>
<span id="ssw-19"><a href="#ssw-19"></a>       <span class="dt">y =</span> <span class="st">&quot;Within Cluster Sum of Square Distance&quot;</span>,</span>
<span id="ssw-20"><a href="#ssw-20"></a>       <span class="dt">title =</span> <span class="st">&quot;Within Cluster Variance across Clusters&quot;</span>)</span></code></pre></div>
</div>
<p>Figure <em>sswp</em> Indicates a sudden stop of decrease in variance at 7 clusters and following that the within cluster variance begins to decrease at a slightly slower rate. For this reason 7 could be an appropriate candidate for the number of clusters, however the minimal amount of change in the within-cluster variance indicates that the data is most likely not clustered at all.</p>
<p><img src="./Figures/Q14WithinClusterVariance.png" /></p>
<h2 id="find-the-number-of-tweets-in-each-cluster">8.2.15 Find the Number of tweets in each cluster</h2>
<p>Moving forward we'll use 3 clusters, 7 is too large and a smaller number will likely be more effective at categorising the data (particularly given that the stratification of the data appears to be quite limited from figure <em>sswp</em>). The number of tweets in a cluster may be measured by using the <code>table</code> function as shown in listing <em>tab</em> and table <em>tabo</em>.</p>
<div>
<span class="label">The <code>table</code> function can count the number of tweets per cluster.</span>
<div class="sourceCode" id="tab" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="tab-1"><a href="#tab-1"></a>K =<span class="st"> </span><span class="kw">kmeans</span>(mds.tweet_weighted_dtm, <span class="dv">3</span>, <span class="dt">nstart =</span> <span class="dv">20</span>)</span>
<span id="tab-2"><a href="#tab-2"></a><span class="kw">table</span>(K<span class="op">$</span>cluster)</span></code></pre></div>
</div>
<table>
<caption>Number of tweets in each cluster identified by <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math> means clustering</caption>
<thead>
<tr class="header">
<th>Cluster</th>
<th>1</th>
<th>2</th>
<th>3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>#</code> of <em>tweets</em></td>
<td>77</td>
<td>58</td>
<td>537</td>
</tr>
</tbody>
</table>
<h2 id="visualise-the-clusters">8.2.16 Visualise the Clusters</h2>
<p>The clusters can be projected into 2D <em>Euclidean</em>-Space using <em>Multi-Dimensional Scaling</em>, these dimensions would represent the first two principle components of the cosine distance of the weigted tweets. This is demonstrated in listings <em>cmds</em>. A plot of the friend countstaus mapped to shape and clusters mapped to colour is demonstrated in listing <em>pt1c</em> shown in <em>pt2</em>, In order to get a better understanding of the distribution of friend counts a plot of the friend count status mapped to colour is demonstrated in listing <em>pt2c</em> and shown in figure <em>pt2</em>.</p>
<div>
<span class="label">Use <em>Multi-Dimensional</em> scaling to project the data into 2 dimensions</span>
<div class="sourceCode" id="cmds" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="cmds-1"><a href="#cmds-1"></a>MDS_Euclid_2D &lt;-<span class="st"> </span><span class="kw">cmdscale</span>(D, <span class="dt">k=</span><span class="dv">2</span>) <span class="co">#TODO What should K be? see issue #10</span></span>
<span id="cmds-2"><a href="#cmds-2"></a>mds_data<span class="op">$</span>Cluster       &lt;-<span class="st"> </span><span class="kw">factor</span>(mds_data<span class="op">$</span>Cluster)</span>
<span id="cmds-3"><a href="#cmds-3"></a></span>
<span id="cmds-4"><a href="#cmds-4"></a><span class="cf">if</span> (<span class="kw">nrow</span>(MDS_Euclid_2D[,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]) <span class="op">==</span><span class="st"> </span><span class="kw">length</span>(K<span class="op">$</span>cluster)</span>
<span id="cmds-5"><a href="#cmds-5"></a>   <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(K<span class="op">$</span>cluster) <span class="op">==</span><span class="st"> </span><span class="kw">nrow</span>(tweets[<span class="op">-</span>null,])) {</span>
<span id="cmds-6"><a href="#cmds-6"></a>mds_data &lt;-<span class="st"> </span><span class="kw">cbind</span>(MDS_Euclid_2D[,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>], <span class="st">&quot;Cluster&quot;</span> =<span class="st"> </span>K<span class="op">$</span>cluster, tweets[<span class="op">-</span>null,])</span>
<span id="cmds-7"><a href="#cmds-7"></a>}</span>
<span id="cmds-8"><a href="#cmds-8"></a></span>
<span id="cmds-9"><a href="#cmds-9"></a>mds_data<span class="op">$</span>Cluster       &lt;-<span class="st"> </span><span class="kw">factor</span>(mds_data<span class="op">$</span>Cluster)</span>
<span id="cmds-10"><a href="#cmds-10"></a><span class="kw">names</span>(mds_data)[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;MDS1&quot;</span>, <span class="st">&quot;MDS2&quot;</span>)</span></code></pre></div>
</div>
<div>
<span class="label">Create a plot of the distribution of Friends among Clusters as shown in figure <em>pt1</em></span>
<div class="sourceCode" id="pt2c" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="pt2c-1"><a href="#pt2c-1"></a><span class="kw">ggplot</span>(pca_data, <span class="kw">aes</span>(<span class="dt">x =</span> MDS1, <span class="dt">y =</span> MDS2, <span class="dt">col =</span> Friend_Status)) <span class="op">+</span></span>
<span id="pt2c-2"><a href="#pt2c-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">shape =</span> Cluster), <span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span></span>
<span id="pt2c-3"><a href="#pt2c-3"></a><span class="st">  </span><span class="kw">stat_ellipse</span>(<span class="dt">level =</span> <span class="fl">0.95</span>) <span class="op">+</span></span>
<span id="pt2c-4"><a href="#pt2c-4"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="pt2c-5"><a href="#pt2c-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">main =</span> <span class="st">&quot;Principal Components of Twitter Data&quot;</span>,</span>
<span id="pt2c-6"><a href="#pt2c-6"></a>       <span class="dt">x =</span> <span class="kw">TeX</span>(<span class="st">&quot;MDS_1&quot;</span>), <span class="dt">y =</span> <span class="kw">TeX</span>(<span class="st">&quot;MDS_2&quot;</span>)) <span class="op">+</span></span>
<span id="pt2c-7"><a href="#pt2c-7"></a><span class="st">  </span><span class="kw">scale_color_discrete</span>(<span class="dt">label =</span> <span class="kw">c</span>(<span class="st">&quot;High Friends&quot;</span>, <span class="st">&quot;Low Friends&quot;</span>)) <span class="op">+</span></span>
<span id="pt2c-8"><a href="#pt2c-8"></a><span class="st">  </span><span class="kw">guides</span>(<span class="dt">col =</span> <span class="kw">guide_legend</span>(<span class="st">&quot;Friend Count </span><span class="ch">\n</span><span class="st"> Status&quot;</span>))</span></code></pre></div>
</div>
<div>
<span class="label">Create a plot of the distribution of Friends Count Status as shown in figure <em>pt2</em></span>
<div class="sourceCode" id="pt1c" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="pt1c-1"><a href="#pt1c-1"></a><span class="kw">ggplot</span>(pca_data, <span class="kw">aes</span>(<span class="dt">x =</span> MDS1, <span class="dt">y =</span> MDS2, <span class="dt">col =</span> Cluster)) <span class="op">+</span></span>
<span id="pt1c-2"><a href="#pt1c-2"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(<span class="dt">shape =</span> Friend_Status), <span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span></span>
<span id="pt1c-3"><a href="#pt1c-3"></a><span class="st">  </span><span class="kw">stat_ellipse</span>(<span class="dt">level =</span> <span class="fl">0.9</span>) <span class="op">+</span></span>
<span id="pt1c-4"><a href="#pt1c-4"></a><span class="st">  </span><span class="kw">theme_classic</span>() <span class="op">+</span></span>
<span id="pt1c-5"><a href="#pt1c-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">main =</span> <span class="st">&quot;Principal Components of Twitter Data&quot;</span>,</span>
<span id="pt1c-6"><a href="#pt1c-6"></a>       <span class="dt">x =</span> <span class="kw">TeX</span>(<span class="st">&quot;MDS_1&quot;</span>), <span class="dt">y =</span> <span class="kw">TeX</span>(<span class="st">&quot;MDS_2&quot;</span>)) <span class="op">+</span></span>
<span id="pt1c-7"><a href="#pt1c-7"></a><span class="st">  </span><span class="kw">scale_shape_discrete</span>(<span class="dt">label =</span> <span class="kw">c</span>(<span class="st">&quot;High Friends&quot;</span>, <span class="st">&quot;Low Friends&quot;</span>)) <span class="op">+</span></span>
<span id="pt1c-8"><a href="#pt1c-8"></a><span class="st">  </span><span class="kw">guides</span>(<span class="dt">shape =</span> <span class="kw">guide_legend</span>(<span class="st">&quot;Friend Count </span><span class="ch">\n</span><span class="st"> Status&quot;</span>))</span></code></pre></div>
</div>
<p><img src="./Figures/betclustplot8216.png" /></p>
<p><img src="./Figures/betfriendplot8216.png" /></p>
<h2 id="comment-on-the-visualisation">8.2.17 Comment on the Visualisation</h2>
<p>Figure <em>pt1</em> indicates that altough there isn't a clear distinction between clusters there is seperation of the tweets in such a way that does allow some degree of classification to occur. Figure <em>pt1</em> and <em>pt2</em> both indicate that having many or few friends is reasonably independent of the cluster that the tweet belongs to.</p>
<h2 id="cluster-with-highest-number-friends">8.2.18 Cluster with Highest Number Friends</h2>
<p>The Number of above or below friends corresponsing to a given cluster can be tabulated by using the <code>table</code> function as shown in listing <em>tfc</em> and table <em>tfct</em>, this indicates that there is a difference in the proportion of users with above average friend counts between clusters with cluster <code>#1</code> having the highest proportion of users with above average friend counts.</p>
<div>
<span class="label">Tabulate the distribution of friends in</span>
<div class="sourceCode" id="tfc" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="tfc-1"><a href="#tfc-1"></a>(clust_friend &lt;-<span class="st"> </span><span class="kw">table</span>(</span>
<span id="tfc-2"><a href="#tfc-2"></a>  pca_data[,<span class="kw">names</span>(pca_data) <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Cluster&quot;</span>, <span class="st">&quot;Friend_Status&quot;</span>)])</span>
<span id="tfc-3"><a href="#tfc-3"></a>)</span>
<span id="tfc-4"><a href="#tfc-4"></a></span>
<span id="tfc-5"><a href="#tfc-5"></a><span class="kw">cbind</span>(clust_friend,</span>
<span id="tfc-6"><a href="#tfc-6"></a>        <span class="st">&quot;Proportion&quot;</span> =<span class="st"> </span><span class="kw">signif</span>(</span>
<span id="tfc-7"><a href="#tfc-7"></a>            (clust_friend[,<span class="dv">1</span>] <span class="op">/</span><span class="st"> </span><span class="kw">rowSums</span>(clust_friend)),</span>
<span id="tfc-8"><a href="#tfc-8"></a>            <span class="dv">2</span>)</span>
<span id="tfc-9"><a href="#tfc-9"></a>      )</span></code></pre></div>
</div>
<table>
<caption>Above Average Friend Counts Across Clusters</caption>
<tbody>
<tr class="odd">
<td><strong><em>Cluster</em></strong></td>
<td><strong><em>Above Average</em></strong></td>
<td><strong><em>Below Average</em></strong></td>
<td><strong><em>Proportion</em></strong></td>
</tr>
<tr class="even">
<td><code>1</code></td>
<td>17</td>
<td>27</td>
<td>0.39</td>
</tr>
<tr class="odd">
<td><code>2</code></td>
<td>141</td>
<td>407</td>
<td>0.26</td>
</tr>
<tr class="even">
<td><code>3</code></td>
<td>16</td>
<td>64</td>
<td>0.20</td>
</tr>
</tbody>
</table>
<h2 id="sample-tweets-from-cluster">8.2.18 Sample Tweets from cluster</h2>
<p>Tweets can be sampled from the clusters by using the <code>sample</code> function with a logical test, this can be combined with a <code>for</code> loop as shown in listing <em>8218</em>, this provides the following output.</p>
<blockquote>
<ul>
<li><strong>Cluster 1</strong>
<ul>
<li><a href="https://twitter.com/search?q=%40BelovedOfBayek&amp;src=typed_query"><span class="citation" data-cites="BelovedOfBayek">@BelovedOfBayek</span></a> <a href="https://twitter.com/search?q=%40BayekOfSiwa&amp;src=typed_query"><span class="citation" data-cites="BayekOfSiwa">@BayekOfSiwa</span></a> <a href="https://twitter.com/search?q=%40assassinscreed&amp;src=typed_query"><span class="citation" data-cites="assassinscreed">@assassinscreed</span></a> <a href="https://twitter.com/search?q=%40Ubisoft&amp;src=typed_query"><span class="citation" data-cites="Ubisoft">@Ubisoft</span></a> <a href="https://twitter.com/search?q=%40UbisoftMTL&amp;src=typed_query"><span class="citation" data-cites="UbisoftMTL">@UbisoftMTL</span></a> <a href="https://twitter.com/search?q=%40Captured_Collec&amp;src=typed_query"><span class="citation" data-cites="Captured_Collec">@Captured_Collec</span></a> <a href="https://twitter.com/search?q=%40GamerGram_GG&amp;src=typed_query"><span class="citation" data-cites="GamerGram_GG">@GamerGram_GG</span></a> <a href="https://twitter.com/search?q=%40_GameScreenshot&amp;src=typed_query"><span class="citation" data-cites="_GameScreenshot">@_GameScreenshot</span></a> And those smiles - and love - are contagious. Believe me, it makes me very happy! What you have is special! 💗 ~ Steffi</li>
<li><a href="https://twitter.com/search?q=%40Ubisoft"><span class="citation" data-cites="Ubisoft">@Ubisoft</span></a> why is it wen I headshot sumone why don’t it register a headshot is a 1 shot kill fix your game sir</li>
<li><a href="https://twitter.com/search?q=%40BikiniBodhi"><span class="citation" data-cites="BikiniBodhi">@BikiniBodhi</span></a> I think we need another movement going. Obviously Ubisoft already has plans for the next few releases of ops but we really need an Op whose ability is to reinforce more walls than others. Especially another castle on the team but for walls. Like 4 walls instead of 2.</li>
<li>The United Arab Emirates logged into my Ubisoft account. For why?</li>
<li><a href="https://twitter.com/search?q=%40Atalagummy"><span class="citation" data-cites="Atalagummy">@Atalagummy</span></a> Está gratis este finde en lo de ubisoft creo</li>
</ul></li>
<li><strong>Cluster 2</strong>
<ul>
<li>Here's everything you need to know about Ubisoft's Watch Dogs Legion in Hindi - Release date, Story - Everything we know about it till now. <a href="https://t.co/B4lMshJdqw">https://t.co/B4lMshJdqw</a> via <a href="https://twitter.com/search?q=%40YouTube"><span class="citation" data-cites="YouTube">@YouTube</span></a></li>
<li><a href="https://twitter.com/search?q=%40Rainbow6Game"><span class="citation" data-cites="Rainbow6Game">@Rainbow6Game</span></a> <a href="https://twitter.com/search?q=%40TheGodlyNoob"><span class="citation" data-cites="TheGodlyNoob">@TheGodlyNoob</span></a> I have never seen a game company ruin their reputation so fast and so careless as Ubisoft</li>
<li>tiltei com a ubisoft, dei block na minha conta sem querer, to mt puto, real</li>
<li>My first game that really hyped me was a game called rolling thunder back in the 80’s <a href="https://t.co/mPWim2hwVY">https://t.co/mPWim2hwVY</a></li>
<li><a href="https://twitter.com/search?q=%40videogamemorals"><span class="citation" data-cites="videogamemorals">@videogamemorals</span></a> <a href="https://twitter.com/search?q=%40PartisanClown"><span class="citation" data-cites="PartisanClown">@PartisanClown</span></a>  more remakes of Lunar: The Silver Star, Lunar Legend and Lunar: Silver Star Harmony, were released in 2002 by Media Rings and Ubisoft and in 2009 by GungHo Online Entertainment and Xseed Games, respectively.\</li>
</ul></li>
<li><strong>Cluster 3</strong>
<ul>
<li><a href="https://twitter.com/search?q=%40Ubisoft"><span class="citation" data-cites="Ubisoft">@Ubisoft</span></a> <a href="https://twitter.com/search?q=%40UbisoftSupport"><span class="citation" data-cites="UbisoftSupport">@UbisoftSupport</span></a> crossplay between xbox and pc for Division 2 please?</li>
<li><a href="https://twitter.com/search?q=%40tornado_raphi"><span class="citation" data-cites="tornado_raphi">@tornado_raphi</span></a> <a href="https://twitter.com/search?q=%40Ubisoft"><span class="citation" data-cites="Ubisoft">@Ubisoft</span></a> <a href="https://twitter.com/search?q=%40UbisoftDE"><span class="citation" data-cites="UbisoftDE">@UbisoftDE</span></a> Haha wollte auch einmal schlau sein :(</li>
<li><code>@Ubisoft</code> I was in the middle in a game waiting for us to spawn in and it took forever and it somehow kicked me from the game for inactivity. Anyway to fix this <a href="https://t.co/Uz1yZ73R4M">https://t.co/Uz1yZ73R4M</a></li>
<li><a href="https://twitter.com/search?q=%40Operatedleech87"><span class="citation" data-cites="Operatedleech87">@Operatedleech87</span></a> Yo lo veia al revez algo de Ubisoft en Girls Frontline, pero igual un juego en consola jalaria.</li>
<li><a href="https://twitter.com/search?q=%40VGPNetwork"><span class="citation" data-cites="VGPNetwork">@VGPNetwork</span></a> <a href="https://twitter.com/search?q=%40GamerGram_GG"><span class="citation" data-cites="GamerGram_GG">@GamerGram_GG</span></a> <a href="https://twitter.com/search?q=%40Ubisoft"><span class="citation" data-cites="Ubisoft">@Ubisoft</span></a> Haha.. I love that film!</li>
</ul></li>
</ul>
</blockquote>
<div>
<span class="label">Sample Tweets from the Individual Clusters</span>
<div class="sourceCode" id="8218" data-org-language="R"><pre class="sourceCode r"><code class="sourceCode r"><span id="8218-1"><a href="#8218-1"></a><span class="kw">set.seed</span>(<span class="dv">8923</span>)</span>
<span id="8218-2"><a href="#8218-2"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>) {</span>
<span id="8218-3"><a href="#8218-3"></a>    n &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">which</span>(pca_data<span class="op">$</span>Cluster <span class="op">==</span><span class="st"> </span>i), <span class="dt">size =</span> <span class="dv">5</span>)</span>
<span id="8218-4"><a href="#8218-4"></a>    <span class="kw">print</span>(tweets<span class="op">$</span>text[n])</span>
<span id="8218-5"><a href="#8218-5"></a>    <span class="kw">print</span>(<span class="st">&quot;===========================&quot;</span>)</span>
<span id="8218-6"><a href="#8218-6"></a>    <span class="kw">print</span>(<span class="st">&quot;===========================&quot;</span>)</span>
<span id="8218-7"><a href="#8218-7"></a>  }</span></code></pre></div>
</div>
<h1 id="appendix">Appendix</h1>
<h2 id="users-with-high-friend-count">Users with High Friend Count</h2>
<table>
<caption>User ID and Friend Count of users with above highest friend count in sample</caption>
<thead>
<tr class="header">
<th><strong><em>User ID</em></strong></th>
<th><strong><em>Friend Count</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>274488119</td>
<td>8752</td>
</tr>
<tr class="even">
<td>743771665</td>
<td>5002</td>
</tr>
<tr class="odd">
<td>1036014247</td>
<td>4999</td>
</tr>
<tr class="even">
<td>2281452613</td>
<td>4992</td>
</tr>
<tr class="odd">
<td>1554453560</td>
<td>4958</td>
</tr>
<tr class="even">
<td>981233818408570880</td>
<td>4944</td>
</tr>
<tr class="odd">
<td>931765564388921344</td>
<td>4836</td>
</tr>
<tr class="even">
<td>807405140</td>
<td>4710</td>
</tr>
<tr class="odd">
<td>1112579152970842112</td>
<td>4514</td>
</tr>
<tr class="even">
<td>2441577446</td>
<td>4322</td>
</tr>
<tr class="odd">
<td>552692862</td>
<td>4229</td>
</tr>
<tr class="even">
<td>956297007127252992</td>
<td>3976</td>
</tr>
<tr class="odd">
<td>22493896</td>
<td>3675</td>
</tr>
<tr class="even">
<td>255922782</td>
<td>3500</td>
</tr>
<tr class="odd">
<td>1067409881332936709</td>
<td>3312</td>
</tr>
<tr class="even">
<td>27998570</td>
<td>3210</td>
</tr>
<tr class="odd">
<td>715118521555017728</td>
<td>3099</td>
</tr>
<tr class="even">
<td>2356170174</td>
<td>2885</td>
</tr>
<tr class="odd">
<td>2372688230</td>
<td>2880</td>
</tr>
<tr class="even">
<td>1868357425</td>
<td>2719</td>
</tr>
</tbody>
</table>
<h2 id="users-with-low-friend-count">Users with Low Friend Count</h2>
<table>
<caption>User ID and Friend Count of users with above highest friend count in sample</caption>
<thead>
<tr class="header">
<th><strong><em>User ID</em></strong></th>
<th><strong><em>Friend Count</em></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1254280995592966145</td>
<td>0</td>
</tr>
<tr class="even">
<td>875126772978913280</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1254256124217319425</td>
<td>0</td>
</tr>
<tr class="even">
<td>1250219450210480128</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1214921087328411648</td>
<td>0</td>
</tr>
<tr class="even">
<td>1254115699628421120</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1217600080376520704</td>
<td>0</td>
</tr>
<tr class="even">
<td>1253480062453600257</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1254178435502571521</td>
<td>0</td>
</tr>
<tr class="even">
<td>1251955545092718592</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1106864828700712960</td>
<td>0</td>
</tr>
<tr class="even">
<td>1160744587620524032</td>
<td>0</td>
</tr>
<tr class="odd">
<td>1254256536710504448</td>
<td>1</td>
</tr>
<tr class="even">
<td>1129040408384868352</td>
<td>1</td>
</tr>
<tr class="odd">
<td>1254121201871589376</td>
<td>1</td>
</tr>
<tr class="even">
<td>1248687797755658243</td>
<td>2</td>
</tr>
<tr class="odd">
<td>1210265263867932675</td>
<td>2</td>
</tr>
<tr class="even">
<td>3380784928</td>
<td>3</td>
</tr>
<tr class="odd">
<td>1177274165239275520</td>
<td>3</td>
</tr>
<tr class="even">
<td>54645521</td>
<td>3</td>
</tr>
</tbody>
</table>
<h2 id="tf-idf-matrix">TF-IDF Matrix</h2>
<table>
<caption>Document Term Matrix of first 6 documents and first 6 Words</caption>
<thead>
<tr class="header">
<th><strong><strong>check</strong></strong></th>
<th><strong><strong>coronavirus</strong></strong></th>
<th><strong><strong>death</strong></strong></th>
<th><strong><strong>first</strong></strong></th>
<th><strong><strong>gone</strong></strong></th>
<th><strong><strong>hour</strong></strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>0.615</td>
<td>0.747</td>
<td>0.830</td>
<td>0.596</td>
<td>0.747</td>
<td>0.698</td>
</tr>
<tr class="even">
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<h2 id="relevant-xkcd">Relevant XKCD</h2>
<p><img src="./Figures/lisp_cycles.png" /></p>
<h1 id="footnotes">Footnotes</h1>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>This works because the <code>tm</code> package preserves the order of the data, this can be confirmed by using a dataframe source as opposed to a vector source (e.g. in listing <em>cpmk</em>) and comparing the ID's before/after transformation.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>The <code>[</code> function is actually shorthand for <code>Extract()</code>, most things in <strong><em>R</em></strong> are functions, this is similar to <em>LISP</em> and has to do with the origins of the language, e.g. <code>sum(1:10) == (sum (1:10))</code>, also relevant see the relevant xkcd in figure <em>xkcd</em>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>It is important not to filter based the logic of an empty vector, because otherwise an empty vector will returned, hence the if statement in listing <em>emp</em>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
</body>
</html>
